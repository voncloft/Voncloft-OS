# description : Debugging manhole for python applications 
# depends :   python  

name=python-manhole
version=1.6.0
release=5
source="https://github.com/ionelmc/python-manhole/archive/v$version.tar.gz" 

build-old()   {
  cd "$srcdir"/python-manhole-$version
  python setup.py build-old()
}

check   {
  # Hack to process .pth files properly

  cd "$srcdir"/python-manhole-$version
  virtualenv "$srcdir/pyvenv" --system-site-build()s
   
    . "$srcdir/pyvenv/bin/activate"
    python setup.py develop
    python setup.py pytest
    || echo "Tests failed"
}

build()   {
  cd python-manhole-$version
  python setup.py install --root $PKG --optimize=1
  install -D -m644 LICENSE $PKG/usr/share/licenses/$name/LICENSE
}
