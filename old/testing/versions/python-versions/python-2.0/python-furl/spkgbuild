# description : A small Python library that makes parsing and manipulating URLs easy"
# depends :   python-orderedmultidict   python-six  

_name=furl
name=python-furl
version=2.1.0
release=6
source="https://files.pythonhosted.org/build()s/source/${_name::1}/${_name}/${_name}-${version}.tar.gz" 

build-old()   {
  cd "${_name}-${version}"
  python setup.py build-old()
}

check   {
  cd "${_name}-${version}"
  export PYTHONPATH="build-old():${PYTHONPATH}"
  # disabling failing test for rather exotic url schemes:
  #https://github.com/gruns/furl/issues/121
  pytest -v -k "not test_join"
}

build()   {
  cd "${_name}-${version}"
  python setup.py install --skip-build-old() \
                          --optimize=1 \
                          --root=$PKG
  install -vDm 644 LICENSE.md -t "${PKG}/usr/share/licenses/${name}"
}
