
name=python-tensorflow-estimator
version=2.3.0
release=4
# description : A high-level TensorFlow API that greatly simplifies machine learning programming"
# depends :   python-wrapt  
source="${name}-${version}.tar.gz::https://github.com/tensorflow/estimator/archive/v${version}.tar.gz" 

build   {
  cd estimator-${version}

  bazel build //tensorflow_estimator/tools/pip_package:build_pip_package
  bazel-bin/tensorflow_estimator/tools/pip_package/build_pip_package ${srcdir}/estimator_pip
}

check   {
  cd estimator-${version}

  # Of course, upstream doesn t care about working tests...
  # Revisit this at some point.
  # bazel test //tensorflow_estimator/...
}

package   {
  cd estimator-${version}

  WHEEL_PACKAGE=$ find "$srcdir"/estimator_pip -name "tensor*.whl" 
  pip install --ignore-installed --upgrade --root $PKG/ $WHEEL_PACKAGE --no-dependencies
}
