
name=python-os-client-config
version=2.1.0
release=4
# description : OpenStack Client Configuation Library 
# depends :   python-openstacksdk  
               python-glanceclient  
source="https://github.com/openstack/os-client-config/archive/$version.tar.gz" 

export PBR_VERSION=$version

prepare   {
  # FS#54781
  #https://bugs.launchpad.net/os-client-config/+bug/1707019
  sed -i "/^packages =/i package_data = os_client_config = *.json */*.json" os-client-config-$version/setup.cfg

  sed -i  s/assertItemsEqual/assertCountEqual/  os-client-config-$version/os_client_config/tests/test_config.py
}

build   {
  cd os-client-config-$version
  python setup.py build
}

check   {
  cd os-client-config-$version
  stestr run
}

package   {
  cd os-client-config-$version
  python setup.py install --root $PKG --optimize=1
}
