
name=python-py3c
version=1.3
release=1
# description : A Python 2/3 compatibility layer for C extensions"
# depends :   python  
source="https://github.com/encukou/py3c/archive/v$version.tar.gz" 

prepare   {
  cd py3c-$version
  # Don t regenerate with broken path in "install" target
  sed -i  s/install: py3c.pc/install:/  Makefile
}

build   {
  cd py3c-$version
  python setup.py build
  make prefix=/usr py3c.pc
}

check   {
  cd py3c-$version
  make test-python
}

package   {
  cd py3c-$version
  make prefix=$PKG/usr install
  python setup.py install --root=$PKG --optimize=1

  # Remove headers in broken location
  rm -r $PKG/usr/include/python*

  install -Dm644 LICENSE.MIT -t $PKG/usr/share/licenses/$name/
}
