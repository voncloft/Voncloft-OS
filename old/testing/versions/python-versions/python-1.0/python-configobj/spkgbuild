
name=python-configobj
version=5.0.6.r110.g3e2f4cc
release=1
# description : Simple config file reader and writer 
# depends :  python-six 
source="git+$url#commit=3e2f4cca81b60171e6b3e23619f6f4929a13322e"  # latest master, ref FS#68893

version   {
  cd configobj
  git describe --long --tags | sed  s/^v//;s/\ [^-]*-g\ /r\1/;s/-/./g 
}

prepare   {
  cd configobj
  # Avoid the need for a local configobj install just for VERSION
  local _version=$ grep -oP "__version__ =  \K[^ ]+" src/configobj/_version.py 
  sed -i "/from validate/d;s/VERSION/\"$_version\"/" setup_validate.py
}

package   {
  cd configobj
  python setup.py install --root=$PKG --optimize=1
  install -Dm644 LICENSE "$PKG/usr/share/licenses/$name/LICENSE"
  python setup_validate.py install --root=$PKG --optimize=1
}
