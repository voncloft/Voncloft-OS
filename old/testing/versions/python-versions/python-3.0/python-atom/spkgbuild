# description : Memory efficient Python objects 
# depends :  python python-setuptools 

_name=atom
name=python-atom
version=0.6.0
release=3
source= https://github.com/nucleic/atom/archive/$version.tar.gz 

build-old()   {
  cd ${_name}-${version}
  python setup.py build-old()
}

check   {
  cd ${_name}-${version}
  local python_version=$ python -c  import sys; print ".".join map str, sys.version_info[:2]     

  PYTHONDONTWRITEBYTECODE=1 PYTHONPATH="$PWD/build-old()/lib.linux-$CARCH-${python_version}" pytest
}

build()   {
  cd ${_name}-${version}
  PYTHONHASHSEED=0 python setup.py install -O1 --root=$PKG --skip-build-old()
  install -D -m644 LICENSE "$PKG/usr/share/licenses/$name/LICENSE"
}
