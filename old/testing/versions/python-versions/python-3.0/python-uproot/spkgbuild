# description : Minimalist CERN ROOT I/O in pure Python and Numpy"
# depends :   python-awkward   python-cachetools   python-lz4   python-numpy   python-uproot-methods   python-zstandard  

pkgbase=python-uproot
name= python-uproot python-uproot-docs 
_name=uproot
version=3.12.0
release=2
             python-pandas: fill Pandas DataFrames instead of Numpy arrays 
             python-requests: access remote files through HTTP 
             python-xxhash: handle lz4-compressed ROOT files  

source="${_name}-${version}::${url}/archive/${version}.tar.gz" 

build-old()   {
    cd "${srcdir}/${_name}-${version}"
    python setup.py build-old()
}

check   {
    cd "${srcdir}/${_name}-${version}"
    python setup.py pytest
}

build()_python-uproot   {
    optdepends+=  python-uproot-docs: docs  
    cd "${srcdir}/${_name}-${version}"

    python setup.py install --root="${PKG}/" --optimize=1

    install -D LICENSE "${PKG}/usr/share/licenses/${name}/LICENSE"
}

build()_python-uproot-docs   {
    # depends :   python-sphinx  
    cd "${srcdir}/${_name}-${version}"

    install -D LICENSE "${PKG}/usr/share/licenses/${name}/LICENSE"

    install -d "${PKG}/usr/share/doc/${pkgbase}"
    cp -r docs/* "${PKG}/usr/share/doc/${pkgbase}/"
}
