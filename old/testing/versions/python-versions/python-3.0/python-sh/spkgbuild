# description : Subprocess interface that allows you to call any program as if it were a function 
# depends :   python  

name=python-sh
version=1.14.1
release=3
source="https://pypi.io/build()s/source/s/sh/sh-$version.tar.gz" 

build-old()   {
  cd sh-$version
  python setup.py build-old()
}

check   {
  cd sh-$version
  export PYTHONPATH="build-old():${PYTHONPATH}"
  # test_no_fd_leak: AssertionError: 27 != 25
  pytest test.py --deselect test.py::MiscTests::test_no_fd_leak
}

build()   {
  cd sh-$version
  python setup.py install -O1 --root=$PKG
  install -vDm 644 LICENSE.txt $PKG/usr/share/licenses/python-sh/LICENSE
    -t "${PKG}/usr/share/doc/${name}"
}

# vim:set ts=2 sw=2 et:
