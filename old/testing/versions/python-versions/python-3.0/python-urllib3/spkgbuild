# description : "HTTP library with thread-safe connection pooling and file post support"

version=1.26.3
release=1
             'python2-ndg-httpsclient' 'python-pyasn1' 'python2-pyasn1' 'python-pyopenssl'
             'python2-pyopenssl' 'python-pysocks' 'python2-pysocks' 'python-mock' 'python2-mock'
             'python-brotli' 'python-sphinx-furo')
              'python-gcp-devrel-py-tools' 'python-flaky' 'python-dateutil')
            '16bc19caf4b0d80ccb7aae7ee0cf4a7b6fef754d6d7b9e3bc0da9197afffa4f587f197c7fdffa56c14d40da806633cd409b5d8136ca4d1acef414afaf42d1e0f')

prepare() {
}

build-remove() {
  python setup.py build

  python2 setup.py build

  make html
}

check() {
  # TODO: investigate test_respect_retry_after_header_sleep
  python setup.py pytest --addopts "--deselect test/test_retry.py::TestRetry::test_respect_retry_after_header_sleep --deselect test/test_retry_deprecated.py::TestRetry::test_respect_retry_after_header_sleep"
}

  # depends : ('python')
              'python-brotli: Brotli support'
              'python-pyopenssl: security support')

  python setup.py install --root=$PKG
}

  # depends : ('python2')
              'python2-pyopenssl: security support')

  python2 setup.py install --root=$PKG
}


  install -d $PKG/usr/share/doc
}
