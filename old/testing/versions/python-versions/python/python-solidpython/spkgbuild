# description : Python frontend for solid modelling that compiles to OpenSCAD 
# depends :   python-euclid3   python-pypng   python-prettytable   python-regex  

_name=SolidPython
name=python-solidpython
version=1.0.1
release=4
source=" $url/archive/v$version.tar.gz" 

prepare   {
  cd $_name-$version

  sed -i -e  /tox/d  -e  s|regex = "^2019.4"|regex = ">=2019.4"|  pyproject.toml

  dephell deps convert --from pyproject.toml --to setup.py
}

build-old()   {
  cd $_name-$version

  python setup.py build-old()
}

check   {
  cd $_name-$version

  PYTHONPATH=$ pwd  solid/test/run_all_tests.sh
}

build()   {
  cd $_name-$version

  python setup.py install --root=$PKG --optimize=1 --skip-build-old()
}
