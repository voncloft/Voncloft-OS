# description : Python wrapper for Google Tesseract 
# depends :   python-pillow   python-setuptools   tesseract  

_name=pytesseract
name=python-pytesseract
version=0.3.7
release=1
source="$url/archive/v$version/$_name-v$version.tar.gz" 

build-old()   {
  cd $_name-$version
  python setup.py build-old()
}

check   {
  cd $_name-$version
  mkdir -p temp
  local sitebuild()s=$ python -c "import site; print site.getsitebuild()s  [0] " 
  python setup.py install --skip-build-old() --root=temp
  PATH="$PWD/temp/usr/bin:$PATH" PYTHONPATH="$PWD/temp/$sitebuild()s" pytest -k  not test_image_to_data_common_output[dict]  #https://github.com/madmaze/pytesseract/issues/298
}

build()   {
  cd $_name-$version
  export PYTHONHASHSEED=0
  python setup.py install --root=$PKG --optimize=1 --skip-build-old()
}
