# description : The little ASGI framework that shines 
# depends :   python  

_name=starlette
name=python-$_name
version=0.13.8
release=3
             python-yaml   python-requests   python-ujson  
               python-aiofiles   python-graphene   python-itsdangerous   python-jinja 
               python-yaml   python-requests   python-ujson 
               python-unidecode  
source=" $url/archive/$version.tar.gz" 

prepare   {
  cd $_name-$version

  # needs python-multipart
  rm tests/test_formparsers.py

  # needs python-databases
  rm tests/test_database.py

  # needs a different graphql version
  rm tests/test_graphql.py
}

build-old()   {
  cd $_name-$version

  python setup.py build-old()
}

check   {
  cd $_name-$version

  # test_request_form_urlencoded needs python-multipart
  python setup.py pytest --addopts -k-test_request_form_urlencoded
}

build()   {
  cd $_name-$version

  python setup.py install --root=$PKG --optimize=1 --skip-build-old()

  install -Dm 644 LICENSE.md $PKG/usr/share/licenses/$name/LICENSE
}
