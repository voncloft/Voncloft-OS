# description : OpenStack Database Pattern Library"
# depends :   python-six   python-pbr   python-alembic   python-debtcollector   python-oslo-i18n 

name=python-oslo-db
version=8.5.0
release=1
          python-oslo-config   python-oslo-utils   python-sqlalchemy   python-sqlalchemy-migrate 
          python-stevedore  
options=  !emptydirs  
source="https://github.com/openstack/oslo.db/archive/$version.tar.gz" 

export PBR_VERSION=$version

prepare   {
  sed -i  s/import unittest2/import unittest as unittest2/  oslo.db-$version/oslo_db/tests/sqlalchemy/test_async_eventlet.py
}

build-old()   {
  cd oslo.db-$version
  python setup.py build-old()
}

check   {
  cd oslo.db-$version
  stestr run
}

build()   {
  cd oslo.db-$version
  python setup.py install --root=$PKG --optimize=1
}

# vim:set ts=2 sw=2 et:
