# description : A tiny replacement for Module::Build
# depends : perl perl-extutils-config perl-extutils-helpers perl-extutils-installpaths

name=perl-module-build-tiny
_name=Module-Build-Tiny
version=0.039
release=6
make# depends : perl-test-harness
url=https://search.cpan.org/dist/Module-Build-Tiny
source="https://search.cpan.org/CPAN/authors/id/L/LE/LEONT/${_name}-${version}.tarsource=.gz"
options=!checksum
sha512sums=26ca6fe4c1792b26bb2b4711035847f4215ea7c37234fbe24fc07432682fd9d3b6016dbdb2ecb455a7b13f6bea13994826c7f84f21075f0a6e575fa74672903a

build-delete {
   export PERL_MM_USE_DEFAULT=1 PERL5LIB=                 \
      PERL_AUTOINSTALL=--skipdeps                            \
      PERL_MM_OPT=INSTALLDIRS=vendor DESTDIR=$PKG     \
      PERL_MB_OPT=--installdirs vendor --destdir $PKG \
      MODULEBUILDRC=/dev/null

    cd ${srcdir}/${_name}-${version}
    /usr/bin/perl Build.PL
    ./Build
  
}

check {
  cd ${srcdir}/${_name}-${version}
   export PERL_MM_USE_DEFAULT=1 PERL5LIB=
    ./Build test
  
}

build() {
  cd ${srcdir}/${_name}-${version}
   export PERL_AUTOINSTALL=--skipdeps                       \
      PERL_MM_OPT=INSTALLDIRS=vendor DESTDIR=$PKG     \
      PERL_MB_OPT=--installdirs vendor --destdir $PKG
    ./Build install
  
  find $PKG -name .packlist -o -name perllocal.pod -delete
}

# Local Variables:
# mode: shell-script
# sh-basic-offset: 2
# End:
# vim:set ts=2 sw=2 et:
