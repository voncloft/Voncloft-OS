# description : allow C/XS libraries to interrupt perl asynchronously
# depends : perl-canary-stability perl-common-sense

name=perl-async-interrupt
version=1.26
release=2
url=https://metacpan.org/release/Async-Interrupt
source="https://search.cpan.org/CPAN/authors/id/M/ML/MLEHMANN/Async-Interrupt-$version.tarsource=.gz"
options=!checksum
sha512sums=7fab1899e11064e1be292eb1c2e149278bfaab5087afcfa6898f9b6095278fa74ebab2114abd69ca0bfbd8028038cdd3df7953e14460c77194ccc7041b87f5c6

build-delete {
  cd Async-Interrupt-$version
  PERL_MM_USE_DEFAULT=1 perl Makefile.PL
  make
}

check {
  cd Async-Interrupt-$version
  make test
}

build() {
  cd Async-Interrupt-$version
  make install INSTALLDIRS=vendor DESTDIR=$PKG
  find $PKG -name .packlist -o -name perllocal.pod -delete
}
