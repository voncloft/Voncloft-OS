# description : A module to implement some of AutoConf macros in pure perl.
# depends : perl-capture-tiny

name=perl-config-autoconf
_dist=Config-AutoConf
version=0.317
release=4
make# depends : bison flex gawk grep pkg-config sed
url=https://metacpan.org/release/Config-AutoConf
source="https://search.cpan.org/CPAN/authors/id/R/RE/REHSACK/${_dist}-${version}.tar.gz"
options="!checksum"
md5sums=29f87fc7803f1725f6daafcf416089ce
sha256sums=01e4b22d2fecb7cfd3cc1f4dabe95cd137cf249cc5e38184f88556e5c98a9ce1

build-delete {
    cd ${srcdir}/${_dist}-${version}
    unset PERL5LIB PERL_MM_OPT PERL_MB_OPT PERL_LOCAL_LIB_ROOT
    export PERL_MM_USE_DEFAULT=1 PERL_AUTOINSTALL=--skipdeps
    perl Makefile.PL
    make
}

check {
    cd ${srcdir}/${_dist}-${version}
    unset PERL5LIB PERL_MM_OPT PERL_MB_OPT PERL_LOCAL_LIB_ROOT
    export PERL_MM_USE_DEFAULT=1
    make test
}

build() {
    cd ${srcdir}/${_dist}-${version}
    unset PERL5LIB PERL_MM_OPT PERL_MB_OPT PERL_LOCAL_LIB_ROOT
    make install INSTALLDIRS=vendor DESTDIR=$PKG
}
build() {
   cd
   perl Makefile.PL
   make
   make DESTDIR=$PKG install
}
