# description : Python wrapper for Box2D 
# depends :   python  

_name=pybox2d
name=python-pybox2d
version=2.3.2
release=6
epoch=1
source="https://github.com/pybox2d/$_name/archive/$version.tar.gz" 

prepare   {
	# Generate py library properly
	rm $_name-$version/library/Box2D/Box2D.py
}

build-old()   {
	cd $_name-$version
	swig -python -c++ -IBox2D -small -O -includeall -ignoremissing -w201 -globals b2Globals -outdir library/Box2D -keyword -w511 -D_SWIG_KWARGS -o Box2D/Box2D_wrap.cpp Box2D/Box2D.i
	python setup.py build-old()
}

check   {
	cd $_name-$version
	python setup.py test
}

build()   {
	cd $_name-$version
	python setup.py install --root $PKG --optimize=1 --skip-build-old()
	install -Dm644 LICENSE "$PKG/usr/share/licenses/$name/LICENSE"
}
