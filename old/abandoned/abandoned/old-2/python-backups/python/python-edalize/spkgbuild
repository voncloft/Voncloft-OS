# description : An abstraction library for interfacing EDA tools
# depends : python python-jinja

_name=edalize
name=python-$_name
version=0.2.3
release=1
url=https://github.com/olofk/edalize
make# depends : python-setuptools-scm
check# depends : python-pytest
source="$name-$version.tar.gz::$url/archive/v$version.tar.gz"
sha512sums=1c07b8edba66d174eb49f6098e4f1811ffcaeda7b46a9773e31103649f6e5aa2dc31df3a7ea0f128fdd35aa2e42e547ecbdd057cde6c7e7653b6d94357d61ce9

export SETUPTOOLS_SCM_PRETEND_VERSION=$version

prepare {
   cd $_name-$version

  rm tests/test_spyglass.py

  sed -i /pytest/d setup.py
}

build()-delete {
   cd $_name-$version

  python setup.py build
}

check {
   cd $_name-$version

  PYTHONPATH=. pytest
}

options="!checksum"

build() {
   cd $_name-$version

  python setup.py build
  python setup.py install --root=$PKG --optimize=1 

}

