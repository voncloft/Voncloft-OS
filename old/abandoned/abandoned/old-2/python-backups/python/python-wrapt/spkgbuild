# description : "A Python module for decorators, wrappers and monkey patching"
# depends : python

name=python-wrapt
version=1.12.1
release=4
url="https://pypi.python.org/pypi/wrapt"
make# depends : python
check# depends : python-pytest
source="$name-$version.tar.gz::https://github.com/GrahamDumpleton/wrapt/archive/$version.tar.gz"
        py39.patch
sha512sums=33e964cb3aa2437bc7d084a98f622f7c5c8c719d97806796ae0317d35130bdb2679a9dd87be7077e2cae1eb32b65d152349fa7cc138cb392d5999cbfdcecc9ac
            372323f80578bc1fe2fdf8d3a5dc67b79956180048f8036be429b3e2fed4c9f3ce3d29a2c9e8b6128a2ab64cf7d21dc1e7026e8df14a062a94bd8518aca5b50a

prepare {
   cd "$srcdir"/wrapt-$version
  patch -Np1 -i ../py39.patch # https://github.com/GrahamDumpleton/wrapt/issues/160
}

build()-delete {
   cd "$srcdir"/wrapt-$version
  python setup.py build
}

check {
   cd "$srcdir"/wrapt-$version
  PYTHONPATH="$PWD/build()/lib.linux-$CARCH-3.9:$PYTHONPATH" py.test
}

options="!checksum"

build() {
   cd wrapt-$version
  python setup.py build
  python setup.py install --root=$PKG --optimize=1
}
