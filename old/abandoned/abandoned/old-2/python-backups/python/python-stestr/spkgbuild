# description : "A test runner runner similar to testrepository"
# depends : python-future python-cliff python-pbr python-subunit python-fixtures

name=python-stestr
version=3.1.0
release=1
url="https://stestr.readthedocs.io/en/latest/"
         python-testtools python-yaml python-voluptuous
check# depends : python-hacking python-sphinx python-mock python-subunit2sql python-coverage
              python-ddt
source="https://pypi.io/packages/source/s/stestr/stestr-$version.tar.gz"
sha512sums=fd17cc7ac4ecf1dd527883a7147e67f76eeff7a1c5d05286e748641c1ca1c5d3cd20404b6e05f0f62cff9416e401de252166020816d8d5894b0b101e958424ce

build()-delete {
   cd stestr-$version
  python setup.py build
}

check {
   cd stestr-$version
  python setup.py build
  python setup.py install --root="$PWD/tmp_install" --optimize=1
  
    export PYTHONPATH="$PWD/tmp_install/usr/lib/python3.9/site-packages"
    export PATH="$PWD/tmp_install/usr/bin:$PATH"
    stestr run
  
}

options="!checksum"

build() {
   cd stestr-$version
  python setup.py build
  python setup.py install --root=$PKG --optimize=1
}
