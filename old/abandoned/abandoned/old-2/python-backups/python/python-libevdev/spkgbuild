# description : Python wrapper for libevdev
# depends : python libevdev

name=python-libevdev
version=0.9
release=3
url=https://gitlab.freedesktop.org/libevdev/python-libevdev
make# depends : python-setuptools python-sphinx python-sphinx_rtd_theme
check# depends : python-pytest python-py python-pluggy
source="$url/-/archive/$version/$name-$version.tar.gz"
sha512sums=8b61b7b5d7f2ccc7c510afa321e048c0b1a77cf6d646d611269c75787ed4fcdb70d463dfdc7bf62b260788db3695a9797fa5809c5ff4d0441180dc31028a3b2a

build()-delete {
   cd $name-$version

  python setup.py build

  make doc
}

check {
   cd $name-$version

  PYTHONPATH=. pytest test/*.py
}

options="!checksum"

build() {
   cd $name-$version

  python setup.py build
  python setup.py install --root $PKG  -O1

  # Install documentation
  install -dm 755 $PKG/usr/share/doc/$name
  cp -r -a --no-preserve=ownership doc/html $PKG/usr/share/doc/$name
  rm -rf $PKG/usr/share/doc/$name/html/.doctrees
}
