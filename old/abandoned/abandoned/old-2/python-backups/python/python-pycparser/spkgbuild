# description : C parser and AST generator written in Python

pkgbase=python-pycparser
version=2.20
release=3
url=https://github.com/eliben/pycparser
source="$pkgbase-$version.tar.gz::https://github.com/eliben/pycparser/archive/release_v$version.tar.gz"
sha512sums=d2dc48727750ec0a80d5e3b0c9fba390c3647416a3e18cad59429edb9f55d043c7695c52301b037c93af5d96ffc85fcba7cd54d376abdb89e973759c59fa189d

prepare {
  cp -a pycparser-release_v$version{,-py2}
}

build()-delete {
   cd "$srcdir"/pycparser-release_v$version
  python setup.py build
   cd pycparser
  python _build()_tables.py

   cd "$srcdir"/pycparser-release_v$version-py2
   cd pycparser
}

check {
   cd "$srcdir"/pycparser-release_v$version
  python tests/all_tests.py

   cd "$srcdir"/pycparser-release_v$version-py2
}

package_python-pycparser {
  # depends : python-ply

   cd pycparser-release_v$version

  python setup.py build
  python setup.py install --root=$PKG --optimize=1
}


   cd pycparser-release_v$version-py2

}
