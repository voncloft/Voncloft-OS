# description : linux kernel for desktop
# depends : kernel-prereq linux-firmware

name=linux-desktop
version=5.18.14
release=1

source="https://cdn.kernel.org/pub/linux/kernel/v5.x/linux-$version.tar.xz
	.config"
options="!checksum"

build()
{
	cd linux-$version
	make mrproper
	cp $SRC/.config .
	make menuconfig
	make -j9
	make INSTALL_MOD_PATH=$PKG modules_install
	mkdir $PKG/boot
	cp  arch/x86/boot/bzImage $PKG/boot/vmlinuz-$version
	mv $SRC/linux-$version $PKG/lib/modules/$kernver/build
	ln -sv build $PKG/lib/modules/$kernver/source
	find -L $PKG/lib/modules/$kernver/build -type l -exec rm -f "{}" \;
}
}
