# description : torrent client
# depends: libtorrent-rasterbar openssl python-chardet python-dbus python-distro python-geoip python-idna python-mako python-pillow python-pyopenssl python-rencode python-service-identity python-setproctitle python-six python-twisted python-xdg python-zope-interface git gtk3 intltool libappindicator libnotify librsvg python-cairo python-gobject2 python-gobject3 python-setuptools xdg-utils deluge-boot

name=deluge
version=2.1.2
release=38
_tag=.dev0

source="https://github.com/deluge-torrent/$name/archive/$name-$version$_tag.tar.gz
	deluged
	deluge-web"
options="!checksum"

build() {
   cd $name-$name-$version$_tag
   python setup.py build
   python setup.py install --root=$PKG --optimize=1
   ###INSTALL BOOT SCRIPTS###
   install -d -m 755 $PKG/etc/rc.d/rc{0,1,2,3,4,5,6,S}.d
   install -d -m 755 $PKG/etc/rc.d/init.d
   install -d -m 755 $PKG/etc/init.d
   install -m 754 $SRC/deluged $PKG/etc/rc.d/init.d/
   install -m 754 $SRC/deluge-web $PKG/etc/rc.d/init.d/
   ln -sfv ../init.d/deluged $PKG/etc/init.d/deluge
   ln -sfv ../init.d/deluge-web $PKG/etc/init.d/deluge-web
   ln -sfv ../init.d/deluged $PKG/etc/rc.d/rc3.d/S99deluged
   ln -sfv ../init.d/deluge-web $PKG/etc/rc.d/rc3.d/S99delugeweb
   ln -sfv ../init.d/deluged $PKG/etc/rc.d/rc5.d/S99deluged
   ln -sfv ../init.d/deluge-web $PKG/etc/rc.d/rc5.d/S99delugeweb
}
