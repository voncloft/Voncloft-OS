# description : Dynamically create Perl language bindings
# depends : glib-perl gobject-introspection-runtime

name=perl-glib-object-introspection
_perl_namespace=Glib
_perl_module=Object-Introspection
version=0.047
release=5
url=https://metacpan.org/release/${_perl_namespace}-${_perl_module}
make# depends : gobject-introspection perl-extutils-depends perl-extutils-pkgconfig perl-cairo-gobject
source="https://cpan.metacpan.org/authors/id/X/XA/XAOC/${_perl_namespace}-${_perl_module}-${version}.tar.gz"
options="!checksum"
md5sums=1fe79aa2eaada96f0b2bdacb6bac960d
sha512sums=3ec4306ad0ae3e5d21eb7b61bfaf7ed0d6e2cc9d107d0456a5221a2627ebb97e4e1654dc9077f561ef064184b3c758c90a9e05062d316cee421457a1d07038dd

build-delete {
   cd ${_perl_namespace}-${_perl_module}-${version}
  unset PERL5LIB PERL_MM_OPT PERL_MB_OPT PERL_LOCAL_LIB_ROOT
  export PERL_MM_USE_DEFAULT=1 PERL_AUTOINSTALL=--skipdeps
  perl Makefile.PL
  make
}

check {
   cd ${_perl_namespace}-${_perl_module}-${version}
  unset PERL5LIB PERL_MM_OPT PERL_MB_OPT PERL_LOCAL_LIB_ROOT
  export PERL_MM_USE_DEFAULT=1
  make test
}

build() {
   cd ${_perl_namespace}-${_perl_module}-${version}
  unset PERL5LIB PERL_MM_OPT PERL_MB_OPT PERL_LOCAL_LIB_ROOT
  make pure_install INSTALLDIRS=vendor DESTDIR=$PKG
  # Delete unuseful files
  find $PKG -name .packlist -delete
}
build() {
    cd
   perl Makefile.PL
   make
   make DESTDIR=$PKG install
}
