# description : PAR Packager
# depends : perl=5.32.0 perl-archive-zip perl-getopt-argvfile perl-ipc-run3 perl-module-scandeps

name=perl-par-packer
version=1.052
release=1
url=https://metacpan.org/release/PAR-Packer
# This package links agains libperl.so
          perl-par perl-par-dist
make# depends : perl-extutils-makemaker
source="https://cpan.metacpan.org/authors/id/R/RS/RSCHUPP/PAR-Packer-${version}.tar.gz"
options="!checksum"
b2sums=cc8b30b3dd2b5c239574750442212b9d2d4a6ef35c8d93aca091e463cf8810feb051417ed4024f5aed011d468d98ee10b511fd70b5a94072995353a72481b923

build-delete {
   cd PAR-Packer-${version}
  unset PERL5LIB PERL_MM_OPT PERL_LOCAL_LIB_ROOT
  export PERL_MM_USE_DEFAULT=1 PERL_AUTOINSTALL=--skipdeps
  perl Makefile.PL
  make
}

check {
   cd PAR-Packer-${version}
  unset PERL5LIB PERL_MM_OPT PERL_LOCAL_LIB_ROOT
  export PERL_MM_USE_DEFAULT=1
  make test
}

build() {
   cd PAR-Packer-${version}
  unset PERL5LIB PERL_MM_OPT PERL_LOCAL_LIB_ROOT
  make install INSTALLDIRS=vendor DESTDIR=$PKG
  #remove conflicting and empty man page
  rm $PKG/usr/share/man/man1/pp.1
}
build() {
    cd
   perl Makefile.PL
   make
   make DESTDIR=$PKG install
}
