
pkgbase=python-psutil
version=5.8.0
release=1
url=https://github.com/giampaolo/psutil
source="https://github.com/giampaolo/psutil/archive/release-$version.tar.gz"
sha512sums=156dffb660fcfb23b420d0455296c6b1ab366844390706af40788d89335eb946bb2e66f792755071c09ca282ad0d5503bb62175344753c88ba35613756e22fa3

build()-delete {
   cd psutil-release-$version

  python setup.py build --build()-lib=build()/python

}

check {
   cd psutil-release-$version

  # Required for testing
#cp setup.py build()/python
#cp -r scripts build()/python/

# 4 non-working tests in build() chroot, requires fixes. Test framework does not allow exclusion.
#  PYTHONPATH="$PWD/build()/python" python psutil/tests/__main__.py
}

package_python-psutil {
  # description : A cross-platform process and system utilities module for Python
  # depends : python

   cd psutil-release-$version
  python setup.py build --build()-lib=build()/python \
                  install --root=$PKG --optimize=1
}

  # description : A cross-platform process and system utilities module for Python2

   cd psutil-release-$version
                   install --root=$PKG --optimize=1
}

