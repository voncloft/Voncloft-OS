# description : Python documentation generator
# depends : python-babel

name=python-sphinx
version=3.4.3
release=1
url=http://www.sphinx-doc.org/
         python-docutils
         python-imagesize
         python-jinja
         python-pygments
         python-requests
         python-setuptools
         python-snowballstemmer
         python-sphinx-alabaster-theme
         python-sphinxcontrib-{{apple,dev,html}help,jsmath,qthelp,serializinghtml}
check# depends : cython
              imagemagick librsvg
              python-html5lib
              python-pytest
              texlive-fontsextra texlive-latexextra
opt# depends : imagemagick: for ext.imgconverter
            texlive-latexextra: for generation of PDF documentation
source="https://pypi.org/packages/source/S/Sphinx/Sphinx-$version.tar.gz"{,.asc}
sha256sums=41cad293f954f7d37f803d97eb184158cfd90f51195131e94875bc07cd08b93c
            SKIP
b2sums=73a488564d5889bfc6d7f6f797aa3b144b03cf5f086a4543c3f4b2a452b353f4d799b80a14a0d4118e227660b7f9367fe8f3a2e91f6127cdca489cf4fad215f3
        SKIP
validpgpkeys=8A11B79A5D0D749A66F0A030102C2C17498D6B9E  # Takeshi KOMIYA <i.tkomiya@gmail.com>
              E9BEABB07E7B9CC3F56E62C91425F8CE5EBA0E07 # Takayuki Shimizukawa <shimizukawa@gmail.com>

build()-delete {
   cd Sphinx-$version
  make build()
}

check {
   cd Sphinx-$version
  LC_ALL="en_US.UTF-8" make test
  rm -r tests
}

options="!checksum"

build() {
   cd Sphinx-$version
  export PYTHONHASHSEED=0
  python setup.py build
  python setup.py install --root=$PKG --optimize=1 
}

