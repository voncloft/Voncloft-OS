# description : "Discover and load entry points from installed packages."
# depends : python

name=python-entrypoints
_name=entrypoints
version=0.3
release=6
url="https://github.com/takluyver/entrypoints"
#url="https://pypi.python.org/pypi/entrypoints"
make# depends : python
#make# depends : python-pip
# several sources because the WHL doesnt come with a license
# and pypi version is the only one with setup.py
source="$name-$version.tgz::https://github.com/takluyver/entrypoints/archive/$version.tar.gz"
        "https://files.pythonhosted.org/packages/py2.py3/e/$_name/$_name-$version-py2.py3-none-any.whl"
        "$name-pypi-$version.tgz::https://pypi.io/packages/source/e/$_name/$_name-$version.tar.gz"
md5sums=3b2d456ff069b080aa95f162a53a6679
         c47396b6c43dadc81e25d29b9fac8bd3
         c5c61ea2e46a0c50ea08f4af7955a0b1

options="!checksum"

build() {
   cd "$srcdir"
  # install is like this because of dist-info related bug report
  # pip actually doesnt do much and is remarkably slow
  #pip install --compile --no-deps --ignore-installed --root=$PKG *.whl
  install -Dm644 entrypoints.py "$PKG/usr/lib/python3.9/site-packages/entrypoints.py"
  _dist="entrypoints-$version.dist-info"
   cd $_dist
  for _i in ./*; do
    install -Dm644 $_i "$PKG/usr/lib/python3.9/site-packages/$_dist/$_i"
  done

   cd "$srcdir/entrypoints-$version"
}
