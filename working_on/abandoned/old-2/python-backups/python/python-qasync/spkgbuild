# description : "Python library for using asyncio in Qt-based applications"
# depends : python qt5-python-bindings

name=python-qasync
version=0.13.0
release=1
url="https://github.com/CabbageDevelopment/qasync"
make# depends : python-setuptools
check# depends : python-pytest python-pyqt5 pyside2 xorg-server-xvfb
source="https://github.com/CabbageDevelopment/qasync/archive/v$version/$name-$version.tar.gz"
sha512sums=6ec6eaba91f27ef8e5cce38258c6211536b116c697a92688af73f66cf63ec3e7fc759942f0fb95675fc648d8a52fde10475598be9b211f83251f0edc58e8ffbb

build()-delete {
   cd qasync-$version
  python setup.py build
}

check {
   cd qasync-$version
  QT_API=PyQt5 xvfb-run python -m pytest
  QT_API=PySide2 xvfb-run python -m pytest
}

options="!checksum"

build() {
   cd qasync-$version
  python setup.py build
  python setup.py install --root="$PKG/" --optimize=1
}
