# description : "Python-based project scripting"
# depends : python-six

name=python-paver
version=1.3.4
release=4
url="https://github.com/paver/paver"
make# depends : python-setuptools
check# depends : python-cogapp python-mock python-nose python-virtualenv
source="$name-$version.tar.gz::https://github.com/paver/paver/archive/Paver-$version.tar.gz"
sha512sums=5747235b81df1dc8726bfa949f13c544e03c596f58c8bfc7ab55cc285f793fbb44cbcaa98acbc6e4a0554418755d3d70246b0e37249473b062d54a23b6bea35f

prepare {
   cd paver-Paver-$version
  sed -i s/from unittest2 import/from unittest import/ tests_integration/*.py
}

build()-delete {
   cd paver-Paver-$version
  python setup.py build
}

check {
   cd paver-Paver-$version
  # https://github.com/paver/paver/issues/205
  python setup.py nosetests || :
}

options="!checksum"

build() {
   cd paver-Paver-$version
  python setup.py build
  python setup.py install --root=$PKG --optimize=1
}
