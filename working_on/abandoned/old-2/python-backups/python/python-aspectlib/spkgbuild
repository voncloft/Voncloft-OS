# description : "Development library for quickly writing configurable applications and daemons"
# depends : python-fields

name=python-aspectlib
version=1.5.2
release=1
url="https://github.com/ionelmc/python-aspectlib"
make# depends : python-setuptools
check# depends : python-mock python-tornado python-process-tests
              python-profilestats python-pytest-runner # mysql-python
source="$name-$version.tar.gz::https://github.com/ionelmc/python-aspectlib/archive/v$version.tar.gz"
sha512sums=33642f828989d07c6af78bdf9adc9f2abbc419df89b878cfe7bd9c8df226a59401176b56b1f2b3ba48661ea5a145520de0bc7a0980226b742b0a79f31ab7dd7f

build()-delete {
   cd python-aspectlib-$version
  python setup.py build
}

check {
   cd python-aspectlib-$version
  # https://github.com/ionelmc/python-aspectlib/issues/15
  python setup.py pytest --addopts --deselect tests/test_integrations_py3.py::test_decorate_tornado_coroutine
}

options="!checksum"

build() {
   cd python-aspectlib-$version
  python setup.py build
  python setup.py install --root=$PKG --optimize=1
}
