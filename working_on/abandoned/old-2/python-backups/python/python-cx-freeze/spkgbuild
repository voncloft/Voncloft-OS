# description : Create standalone executables from Python scripts
# depends : python-importlib-metadata

name=python-cx-freeze
version=6.5.3
release=1
url=https://marcelotduarte.github.io/cx_Freeze
make# depends : python-setuptools
check# depends : python-nose python-openpyxl
replaces=python-cx_freeze
provides=python-cx_freeze
conflicts=python-cx_freeze
source="https://github.com/marcelotduarte/cx_Freeze/archive/$version/$name-$version.tar.gz"
sha512sums=4de0b52ee2862cb9b467d64db58aca4b33c2998bbcaa86541ceba92266ccd0800665582d1327203a8b2942bd1b9282d611b29a7122ebf67591fd62b4b7a1327f

prepare {
   cd cx_Freeze-$version
  # https://github.com/marcelotduarte/cx_Freeze/pull/833
  sed -i s/excludes$/excludes or []/ cx_Freeze/finder.py
}

build()-delete {
   cd cx_Freeze-$version
  python setup.py build
}

check {
   cd cx_Freeze-$version
  python setup.py nosetests || echo "Tests failed"
}

options="!checksum"

build() {
   cd cx_Freeze-$version
  python setup.py build
  python setup.py install --root $PKG --optimize 1 
}
