# description : A pure python module to access memcached via its binary protocol with SASL auth support
# depends : python-six python-uhashring

name=python-binary-memcached
version=0.30.1
release=2
url=https://github.com/jaysonsantos/python-binary-memcached
make# depends : python-setuptools python-uhashring
check# depends : memcached python-pytest python-trustme
source="$name-$version.tar.gz::https://github.com/jaysonsantos/python-binary-memcached/archive/v$version.tar.gz"
sha512sums=48cb475121b7ed8e30f4c029f53fa8761089649525b17300da0bbba4f9a996880983805553140dfb457c5836e83a5f16f50fe9995fc68cd534eda4f34028bfd7

prepare {
  sed -i /typing/d python-binary-memcached-$version/setup.py
}

build()-delete {
   cd python-binary-memcached-$version
  python setup.py build
}

check {
   cd python-binary-memcached-$version
  python -m pytest
}

options="!checksum"

build() {
   cd python-binary-memcached-$version
  python setup.py build
  python setup.py install --root $PKG --optimize=1
}
