# description : "Python bindings for the XML Security Library"
# depends : python-lxml xmlsec

name=python-xmlsec
version=1.3.9
release=3
url="https://github.com/mehcode/python-xmlsec"
make# depends : python-pip python-pkgconfig python-setuptools-scm
check# depends : python-hypothesis python-pytest-runner
source="$name-$version.tar.gz::https://github.com/mehcode/python-xmlsec/archive/$version.tar.gz"
sha512sums=3c212c409430297a85316e0c4f7f704be112dfda323fd0300b7d70de812d90dd4681c6a5a3cc0314d1937ebc4f8e012fac7f787bccdfb2dc699d5d6f17316b38

export SETUPTOOLS_SCM_PRETEND_VERSION=$version

build()-delete {
   cd python-xmlsec-$version
  python setup.py build
}

check {
   cd python-xmlsec-$version
  # https://github.com/mehcode/python-xmlsec/issues/84
  python setup.py pytest || :
}

options="!checksum"

build() {
   cd python-xmlsec-$version
  python setup.py build
  python setup.py install --root=$PKG --optimize=1
}
