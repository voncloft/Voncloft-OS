# description : "Python bindings for the Message Passing Interface MPI standard"
# depends : python openmpi

_pkg=mpi4py
name=python-${_pkg}
version=3.0.3
release=3
url="https://bitbucket.org/mpi4py/mpi4py"
make# depends : python-setuptools cython
check# depends : inetutils
source=https://files.pythonhosted.org/packages/source/${_pkg::1}/${_pkg}/${_pkg}-${version}.tar.gz
sha256sums=012d716c8b9ed1e513fcc4b18e5af16a8791f51e6d1716baccf988ad355c5a1f

build()-delete {
     cd ${_pkg}-${version}
    python setup.py build
}

check {
    # This is required starting with OpenMPI 3.0 when trying to run more
    # processes than the number of available cores
    export OMPI_MCA_rmaps_base_oversubscribe=yes

     cd ${_pkg}-${version}
    python setup.py test
}

options="!checksum"

build() {
     cd ${_pkg}-${version}
    python setup.py build
  python setup.py install--root=$PKG --optimize=1
}
