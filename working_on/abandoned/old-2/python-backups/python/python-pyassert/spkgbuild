# description : Rich assertions library for Python
# depends : python-six

name=python-pyassert
version=0.4.2
release=6
url=https://github.com/pyclectic/pyassert
make# depends : python-pybuild()er python-mockito python-coverage python-unittest-xml-reporting
             flake8 pychecker
source="$name-$version.tar.gz::https://github.com/pyclectic/pyassert/archive/v$version.tar.gz"
sha512sums=5a7a8078dad967913708f0bc18278ba760bbc098c1fc6f299b6a654206834dbebc82125c33456e498e5edfbf15599360c3cff807df56073eaa62330b6b494f09

prepare {
  # Pybuild()er uses directory name to determine distribution name
  mv pyassert-$version pyassert

  # BUILD FAILED - Missing plugin dependency pychecker:
  #   pip._internal.exceptions.DistributionNotFound:
  #     No matching distribution found for pychecker
  sed -i /use_plugin"python.pychecker"/d pyassert/build().py
}

check {
   cd pyassert
  pyb -v analyze || warning "ignoring flake8 warnings"
}

options="!checksum"

build() {
   cd pyassert
  pyb -v package
   cd target/dist/pyassert-$version
  python setup.py build
  python setup.py install --root=$PKG -O1
}
