# description : A py.test plugin providing fixtures and markers to simplify testing of asynchronous tornado applications.
# depends : python-pytest python-tornado

name=python-pytest-tornado
version=0.8.1
release=2
url=https://github.com/eugeniy/pytest-tornado
make# depends : python-setuptools
source="https://github.com/eugeniy/pytest-tornado/archive/v$version/$name-$version.tar.gz"
sha512sums=e655ee9e28461c68b6cc642dbbb203a31154305a603951641e795c605f55970243bb9f7a8858a44bf70faba3d647bea6cf1525f2f9655a968cabbea43beec3d6

build()-delete {
   cd pytest-tornado-$version
  python setup.py build
}

check {
  # Hack entry points by installing it

   cd pytest-tornado-$version
  python setup.py build
  python setup.py install --root="$PWD/tmp_install" --optimize=1
  PYTHONPATH="$PWD/tmp_install/usr/lib/python3.9/site-packages:$PYTHONPATH" py.test
}

options="!checksum"

build() {
   cd pytest-tornado-$version
  python setup.py build
  python setup.py install --root=$PKG --optimize=1
}

