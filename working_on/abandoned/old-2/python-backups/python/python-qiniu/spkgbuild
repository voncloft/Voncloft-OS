# description : "Qiniu Resource Storage SDK for Python"
# depends : python-requests python-setuptools

name=python-qiniu
version=7.3.1
release=1
url=https://github.com/qiniu/python-sdk
check# depends : python-pytest-runner
source="$name-$version.tar.gz::https://github.com/qiniu/python-sdk/archive/v$version.tar.gz"
sha512sums=c753ae4e5d6630da678e4103b6952c523baa56542aab129856d74c51cfc358a6d2f41a3d00c1ecf69ed13e97a52ded4d184bea4abf7d381bca7a0b4f673824fa

build()-delete {
   cd python-sdk-$version
  python setup.py build
}

check {
  # Extracted from .travis.yml
  export QINIU_TEST_BUCKET="pythonsdk"
  export QINIU_TEST_DOMAIN="pythonsdk.qiniudn.com"
  export QINIU_TEST_ENV="travis"

   cd python-sdk-$version
  python setup.py pytest || echo "Tests failed"
}

options="!checksum"

build() {
   cd python-sdk-$version
  python setup.py build
  python setup.py install -O1 --root $PKG

}
