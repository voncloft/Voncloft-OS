# description : "Context managers by jaraco"
# depends : python-jaraco python-yg.lockfile

name=python-jaraco.context
version=4.0.0
release=1
url="https://github.com/jaraco/jaraco.context"
make# depends : python-setuptools-scm
check# depends : python-pytest-black python-pytest-checkdocs python-pytest-cov
              python-pytest-flake8 python-pytest-mypy python-jaraco.test
source="https://github.com/jaraco/jaraco.context/archive/v$version/$name-$version.tar.gz"
sha512sums=90a2010d87ac75f24c17bc054c664eeb442d9a7d4148d4f489a493aba9fdf654826f341b88ecad95943ce30aec934c5574d33dbd6cfcb67057315d7c3d5f31ff

export SETUPTOOLS_SCM_PRETEND_VERSION=$version

prepare {
   cd jaraco.context-$version
  sed -i /import jaraco.apt/d jaraco/context.py
  # Ignore flake8 error introduced by the above apt workaround
  echo -e \nper-file-ignores =\n\tjaraco/context.py: F821 >> .flake8
}

build()-delete {
   cd jaraco.context-$version
  python setup.py build
}

check {
   cd jaraco.context-$version
  python -m pytest
}

options="!checksum"

build() {
   cd jaraco.context-$version
  python setup.py build
  python setup.py install --root=$PKG --optimize=1

}
