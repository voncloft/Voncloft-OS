# description : MessagePack serializer implementation for Python
# depends : python

name=python-msgpack
version=1.0.2
release=2

url=https://github.com/msgpack/msgpack-python


make# depends : cython python-setuptools
check# depends : python-pytest python-six

source=msgpack-python-$version.tar.gz::https://github.com/msgpack/msgpack-python/archive/v$version.tar.gz

sha512sums=8e53c57312beed0cbc24b681b605fa8b832469b1aab035aaa187b2887e7865ff653a3f358dab2f3e773c657cf0af4264d4e530639ef23934d4b95d9fa2a7ee9a

build()-delete {
   cd msgpack-python-$version
  python setup.py build
}

check {
   cd msgpack-python-$version
  PYTHONDONTWRITEBYTECODE=1 PYTHONPATH=$printf %s\n $PWD/build()/* | paste -sd: py.test test
}

options="!checksum"

build() {
   cd msgpack-python-$version
  export PYTHONHASHSEED=0
  python setup.py build
  python setup.py install  --root=$PKG --optimize=1
}

