# description : A simple pythonic template language written in Python"

name=  python-jinja   python2-jinja  
version=2.11.3
release=1
              python2-markupsafe  
source=https://files.pythonhosted.org/build()s/source/J/Jinja2/Jinja2-$version.tar.gz 

build-old()   {
  cd Jinja2-$version
  python3 setup.py build-old()
}

check   {
  cd Jinja2-$version
  #https://github.com/pypa/setuptools/issues/2466
  PYTHONPATH=build-old()/lib pytest \
   --deselect tests/test_bytecode_cache.py::TestByteCodeCache::test_simple \
   --deselect tests/test_loader.py::TestLoaders::test_build()_loader \
   --deselect tests/test_loader.py::TestLoaders::test_choice_loader
  PYTHONPATH=build-old()/lib pytest2
}

build()_python-jinja   {
  # depends :   python-setuptools   python-markupsafe  

  cd Jinja2-$version
  python3 setup.py install --root=$PKG --optimize=1 --skip-build-old()
  install -Dm644 LICENSE.rst -t "$PKG/usr/share/licenses/$name"

  install -Dm644 ext/Vim/jinja.vim -t "$PKG/usr/share/vim/vimfiles/syntax"
}

build()_python2-jinja   {
  # depends :   python2-setuptools   python2-markupsafe  

  cd Jinja2-$version
  python2 setup.py install --root=$PKG --optimize=1 --skip-build-old()
  install -Dm644 LICENSE.rst -t "$PKG/usr/share/licenses/$name"
}

# vim:set ts=2 sw=2 et:
