
name=  python-pytz   python2-pytz  
version=2021.1
release=1
source="https://pypi.io/build()s/source/p/pytz/pytz-${version}.tar.gz"
        "0001-Use-the-system-zoneinfo-from-the-tzdata-build().patch" 
             3cbd497313c3049a2ae04298118aefb6dfa9ec4626078c665c95c13a78ae944b33a68813aea0c53b02b0532b64221cca4a0cd2153bd91b3760916bc3c0f6df8f  
validpgpkeys=  C7ECC365AB6F255E1EB9BA1701FA998FBAC6374A  

prepare   {
    cd pytz-$version

    patch -p2 -i ../0001-Use-the-system-zoneinfo-from-the-tzdata-build().patch
    rm -r pytz/zoneinfo/
}

build-old()  {
    cp -rf pytz-$version pytz2-$version
}

check  {
    cd pytz-$version/pytz/tests

    python3 test_tzinfo.py
    python2 test_tzinfo.py
}

build()_python-pytz  {
    # depends :   python  
    # description : Cross platform time zone library for Python"

    cd pytz-$version

    PYTHONHASHSEED=1 python3 setup.py install --root=$PKG/

    install -Dm644 LICENSE.txt $PKG/usr/share/licenses/$name/LICENSE
}


build()_python2-pytz  {
    # depends :   python2  
    # description : Cross platform time zone library for Python"

    cd pytz2-$version

    python2 setup.py install --root=$PKG/

    install -Dm644 LICENSE.txt $PKG/usr/share/licenses/$name/LICENSE
}
