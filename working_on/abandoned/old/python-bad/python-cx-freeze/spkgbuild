# description : Create standalone executables from Python scripts 
# depends :   python-importlib-metadata  

name=python-cx-freeze
version=6.5.3
release=1
replaces=  python-cx_freeze  
provides=  python-cx_freeze  
conflicts=  python-cx_freeze  
source="https://github.com/marcelotduarte/cx_Freeze/archive/$version/$name-$version.tar.gz" 

prepare   {
  cd cx_Freeze-$version
  #https://github.com/marcelotduarte/cx_Freeze/pull/833
  sed -i  s/excludes$/excludes or []/  cx_Freeze/finder.py
}

build-old()   {
  cd cx_Freeze-$version
  python setup.py build-old()
}

check   {
  cd cx_Freeze-$version
  python setup.py nosetests || echo "Tests failed"
}

build()   {
  cd cx_Freeze-$version
  python setup.py install --root $PKG --optimize 1 --skip-build-old()
}
