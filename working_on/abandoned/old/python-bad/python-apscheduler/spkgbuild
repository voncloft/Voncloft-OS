# description : In-process task scheduler with Cron-like capabilities"
# depends :   python-setuptools   python-six   python-pytz   python-tzlocal  

name=python-apscheduler
version=3.7.0
release=1
               python-pytest-tornado   python-redis   python-sqlalchemy   python-tornado 
               python-twisted   redis  
# python-kazoo, python-pymongo removed due to lack of running service
source="https://github.com/agronholm/apscheduler/archive/v$version/$name-$version.tar.gz" 

export SETUPTOOLS_SCM_PRETEND_VERSION=$version

build-old()   {
  cd apscheduler-$version
  python setup.py build-old()
}

check   {
  cd apscheduler-$version
  python setup.py egg_info
  pifpaf run redis -- python -m pytest
}

build()   {
  cd apscheduler-$version
  python setup.py install --root=$PKG --optimize=1

  install -Dm644 LICENSE.txt -t $PKG/usr/share/licenses/$name/
}
