# description : Python Matrix client library, designed according to sans I/O principles 
# depends :   python   python-aiofiles   python-aiohttp   python-atomicwrites   python-cachetools 
name=python-matrix-nio
version=0.16.0
release=1
          python-future   python-h11   python-h2   python-jsonschema   python-logbook   python-olm 
          python-peewee   python-pycryptodome   python-unpaddedbase64  
               python-pytest   python-pytest-aiohttp   python-pytest-benchmark  
validpgpkeys=  689A3B5BC6560AB4C99A2A0581314DA807EF4E22   # Damir JeliÄ‡  poljar  <poljar@termina.org.uk>

version   {
	cd "${name#python-}"
	git describe | sed  s/\ [^-]*-\ g/r\1/;s/-/./g 
}

prepare   {
	cd "${name#python-}"
	dephell deps convert --from pyproject.toml --to setup.py
}

build-old()   {
	cd "${name#python-}"
	python setup.py build-old()
}

check   {
	cd "${name#python-}"
	python -m pytest
}

build()   {
	cd "${name#python-}"
	python setup.py install --root=$PKG --optimize=1 --skip-build-old()
	install -Dm644 LICENSE.md "$PKG/usr/share/licenses/$name/LICENSE"
}
