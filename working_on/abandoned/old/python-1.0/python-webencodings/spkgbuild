# Maintainer: Jelle van der Waa <jelle@vdwaa.nl>
# Contributor: Jelle van der Waa <jelle@vdwaa.nl>

pkgbase=python-webencodings
name=('python2-webencodings' 'python-webencodings')
version=0.5.1
release=6
url="https://github.com/gsnedders/python-webencodings"
makedepends=('python2' 'python' 'python-setuptools' 'python2-setuptools')
checkdepends=('python-nose' 'python2-nose')
source=(https://github.com/gsnedders/python-webencodings/archive/v${version}.tar.gz)
md5sums=('7eb67377743cd55eaa356496c439471e')

package_python-webencodings() {
pkgdesc="This is a Python implementation of the WHATWG Encoding standard."
depends=('python')
    cd ${pkgbase}-${version}

    python3 setup.py install --root="${pkgdir}"
    install -D -m644 LICENSE "${pkgdir}"/usr/share/licenses/${name}/LICENSE
}

package_python2-webencodings() {
pkgdesc="This is a Python implementation of the WHATWG Encoding standard."
depends=('python2')
    cd ${pkgbase}-${version}

    python2 setup.py install --root="${pkgdir}"
    install -D -m644 LICENSE "${pkgdir}"/usr/share/licenses/${name}/LICENSE
}

check() {
    cd ${pkgbase}-${version}/webencodings

    nosetests tests.py

    nosetests2 tests.py
}
