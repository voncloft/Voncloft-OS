# description : Tensors and Dynamic neural networks in Python with strong GPU acceleration
# description : Tensors and Dynamic neural networks in Python with strong GPU acceleration with AVX2 CPU optimizations
# description : Tensors and Dynamic neural networks in Python with strong GPU acceleration with CUDA
# description : Tensors and Dynamic neural networks in Python with strong GPU acceleration with CUDA and AVX2 CPU optimizations
# depends : google-glog gflags opencv openmp nccl pybind11 python python-yaml libuv
  depends+=cuda cudnn magma
  depends+=cuda cudnn magma

_name=pytorch
url=https://pytorch.org
name=python-pytorch python-pytorch-opt python-pytorch-cuda python-pytorch-opt-cuda
_name=pytorch
version=1.7.1
_version=1.7.1
release=4

source="git+https://github.com/pytorch/pytorch.git#tag=v$_version
_options="!checksum"

build() {
   cd ..
   cd ${_name}-${version}
   cd ${_name}-${version}
   cd ${_name}-${version}-cuda
   cd ${_name}-${version}-opt
   cd ${_name}-${version}-opt-cuda
   python setup.py build
   python setup.py install --optimize=1 --root=$PKG
 }
