# description : Fast HTTP parser 
# depends :   python   http-parser  

_name=httptools
name=python-$_name
version=0.1.1
release=4
source=" $url/archive/v$version.tar.gz" 

prepare   {
  cd $_name-$version

  sed -i  s|../../vendor/http-parser/http_parser.h|/usr/include/http_parser.h|  $_name/parser/cparser.pxd
}

build-old()   {
  cd $_name-$version

  python setup.py build-old() build-old()_ext --use-system-http-parser
}

build()   {
  cd $_name-$version

  python setup.py install --root=$PKG --optimize=1 --skip-build-old()

  install -Dm 644 LICENSE $PKG/usr/share/licenses/$name/LICENSE
}

# vim:set ts=2 sw=2 et:
