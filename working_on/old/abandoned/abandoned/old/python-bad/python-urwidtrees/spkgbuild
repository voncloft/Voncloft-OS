# description : Tree widgets for urwid."
# depends :  python  python-urwid>=1.1.0  

_name=urwidtrees
name=python-urwidtrees
version=1.0.3
release=5
source="$_name-$version.tar.gz::https://github.com/pazz/$_name/archive/$version.tar.gz"
        "https://github.com/pazz/urwidtrees/commit/ed39dbc4fc67b0e0249bf108116a88cd18543aa9.patch" 
          7489b033cddaf0e655896b1a2fb2ea61  

prepare   {
	cd "$srcdir/$_name-$version"

    # drop unneeded mock dependency:https://github.com/pazz/urwidtrees/issues/48
    patch -p1 -i ../ed39dbc4fc67b0e0249bf108116a88cd18543aa9.patch
}

build-old()   {
	cd "$srcdir/$_name-$version"
	python setup.py build-old()
	make SPHINXBUILD=sphinx-build-old() -C docs man html
}

build()_python-urwidtrees   {
	cd "$srcdir/$_name-$version"

	python setup.py install --optimize=1 --root=$PKG

	install -dm755 "$PKG/usr/share/doc/$name"
	cp -a docs/build-old()/html/* "$PKG/usr/share/doc/$name"
}
