# description : "Provides enhanced HTTPS support for httplib and urllib2 using PyOpenSSL"

pkgbase=python-ndg-httpsclient
_name=ndg_httpsclient
version=0.5.1
release=7
url="https://pypi.python.org/pypi/ndg-httpsclient"
             python-setuptools python-pyopenssl python-pyasn1
options=!emptydirs
source=https://files.pythonhosted.org/packages/source/n/ndg-httpsclient/$_name-$version.tar.gz
sha256sums=d72faed0376ab039736c2ba12e30695e2788c4aa569c9c3e3d72131de2592210

build()-delete {
   cd "$srcdir"/$_name-$version

  rm -rf ../build()py3; mkdir ../build()py3
  python setup.py build -b ../build()py3

  rm -rf ../build()py2; mkdir ../build()py2
}

package_python-ndg-httpsclient {
  # depends : python-pyopenssl python-pyasn1
  _site_packages=$python -sSc import site; printsite.getsitepackages[0]

   cd "$srcdir"/$_name-$version
  rm -rf build(); ln -s ../build()py3 build()
  python setup.py build
  python setup.py install  -O1 --root=$PKG
}


   cd "$srcdir"/$_name-$version
  rm -rf build(); ln -s ../build()py2 build()
  mv $PKG/usr/bin/ndg_httpclient{,2}
}
