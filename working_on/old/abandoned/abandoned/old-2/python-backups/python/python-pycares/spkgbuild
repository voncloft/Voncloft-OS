# description : Python interface for c-ares
# depends : python-cffi # c-ares is bundled

name=python-pycares
version=3.1.1
release=3
url=https://github.com/saghul/pycares
make# depends : python-setuptools
#check# depends : python-idna
opt# depends : python-idna
source="https://files.pythonhosted.org/packages/source/p/pycares/pycares-$version.tar.gz"
sha256sums=18dfd4fd300f570d6c4536c1d987b7b7673b2a9d14346592c5d6ed716df0d104

build()-delete {
   cd pycares-$version
  python setup.py build
}

# test_query_any fails https://github.com/saghul/pycares/issues/108
#check {
#   cd pycares-$version
#  mkdir -p temp
#  local sitepackages=$python -c "import site; printsite.getsitepackages[0]"
#  python setup.py build
  python setup.py install  --root=temp
#  PATH="$PWD/temp/usr/bin:$PATH" PYTHONPATH="$PWD/temp/$sitepackages" python tests/tests.py
#}

options="!checksum"

build() {
   cd pycares-$version
  python setup.py build
  python setup.py install --root=$PKG --optimize=1 
}

