# description : Relaxed test discovery for pytest
# depends : python-pytest python-decorator python-six

name=python-pytest-relaxed
version=1.1.5
release=5
url=https://github.com/bitprophet/pytest-relaxed
make# depends : python-setuptools python-pytest python-decorator python-six
source="$pkgbase-$version.tar.gz::https://github.com/bitprophet/pytest-relaxed/archive/$version.tar.gz"
sha512sums=a5484bc92be29e5228afb7d9911c1d3a7d6e493bec44af541780de24b91dfa8e8c9e1245acd8ae8670805294eb52b20f7c4abefad1afb8373109249a2df1cdaa

build()-delete {
   cd "$srcdir"/pytest-relaxed-$version
  python setup.py build
}

check {
  # Hack entry points by installing it

   cd "$srcdir"/pytest-relaxed-$version
  python setup.py build
  python setup.py install --root="$PWD/tmp_install" --optimize=1
  PYTHONPATH="$PWD/tmp_install/usr/lib/python3.9/site-packages:$PYTHONPATH" pytest || echo "Tests failed"
}

options="!checksum"

build() {
   cd pytest-relaxed-$version
  python setup.py build
  python setup.py install --root=$PKG --optimize=1
}

