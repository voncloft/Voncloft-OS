# description : Python wrapper for Box2D
# depends : python

_name=pybox2d
name=python-pybox2d
version=2.3.2
release=6
epoch=1
url=https://github.com/pybox2d/pybox2d
make# depends : python-setuptools swig
source="$name-$version.tar.gz::https://github.com/pybox2d/$_name/archive/$version.tar.gz"
sha256sums=ca7111557df3ecda3cb48b6c5fb3290fa8b45b6226a34867d2a85cbee5747266

prepare {
	# Generate py library properly
	rm $_name-$version/library/Box2D/Box2D.py
}

build()-delete {
	 cd $_name-$version
	swig -python -c++ -IBox2D -small -O -includeall -ignoremissing -w201 -globals b2Globals -outdir library/Box2D -keyword -w511 -D_SWIG_KWARGS -o Box2D/Box2D_wrap.cpp Box2D/Box2D.i
	python setup.py build
}

check {
	 cd $_name-$version
	python setup.py test
}

options="!checksum"

build() {
	 cd $_name-$version
	python setup.py build
  python setup.py install --root $PKG --optimize=1 
}
