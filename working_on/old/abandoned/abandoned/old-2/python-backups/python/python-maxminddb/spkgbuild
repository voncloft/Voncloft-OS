# description : "Reader for the MaxMind DB format"
# depends : python libmaxminddb

name=python-maxminddb
version=2.0.3
_testdatacommit=e3764a229ff98541884a3cd4bd7dc95f4ae5d466
release=3
url="https://github.com/maxmind/MaxMind-DB-Reader-python"
make# depends : python-setuptools
check# depends : python-nose python-mock
source="$name-$version.tar.gz::https://github.com/maxmind/MaxMind-DB-Reader-python/archive/v$version.tar.gz"
        https://github.com/maxmind/MaxMind-DB/archive/$_testdatacommit.tar.gz
sha512sums=f853eb0cd3ce756e60ca99bc44f26a593940fd63a6d2b525880e66b7d71d2327d208147eb132c792ebac462ab210ef502f340ef8ab7a09374389f9b90f8a8ded
            618bef60b69492aecd06467428e36d7a10f2aa846e7afd507b6eac1f3a6ceceeb14ed95654b629c9d2638634a5184658236b644edccc99ae2d24e35d9d1f6db9

prepare {
   cd MaxMind-DB-Reader-python-$version
  rmdir tests/data
  ln -s "$srcdir"/MaxMind-DB-$_testdatacommit tests/data
}

build()-delete {
   cd MaxMind-DB-Reader-python-$version
  python setup.py build
}

check {
   cd MaxMind-DB-Reader-python-$version
  python setup.py nosetests
}

options="!checksum"

build() {
   cd MaxMind-DB-Reader-python-$version
  python setup.py build
  python setup.py install --root=$PKG --optimize=1
}
