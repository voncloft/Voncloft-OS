# description : Perl extension for return the total amount of physical memory
# depends : perl

name=perl-sys-meminfo
version=0.99
release=2
url=https://metacpan.org/release/Sys-MemInfo
source="https://cpan.metacpan.org/authors/id/S/SC/SCRESTO/Sys-MemInfo-${version}.tarsource=.gz"
options=!checksum
b2sums=f45ebe017ff40cd612d69b9e804348bed8b78526c18b308a16accf7ffeec1263c2bd8ac6de8ffdf25f9c4e01562a9aa91563f159f0e76268e4bc4f188654a814

build-delete {
  cd Sys-MemInfo-${version}
  unset PERL5LIB PERL_MM_OPT PERL_LOCAL_LIB_ROOT
  export PERL_MM_USE_DEFAULT=1 PERL_AUTOINSTALL=--skipdeps
  perl Makefile.PL
  make
}

check {
  cd Sys-MemInfo-${version}
  unset PERL5LIB PERL_MM_OPT PERL_LOCAL_LIB_ROOT
  export PERL_MM_USE_DEFAULT=1
  make test
}

build() {
  cd Sys-MemInfo-${version}
  unset PERL5LIB PERL_MM_OPT PERL_LOCAL_LIB_ROOT
  make install INSTALLDIRS=vendor DESTDIR=$PKG
}
