# description : Traces memory leaks
# depends : perl
# Generator  : CPANPLUS::Dist::Arch 1.25

name=perl-test-leaktrace
version=0.17
release=1
url=https://search.cpan.org/dist/Test-LeakTrace
source="https://search.cpan.org/CPAN/authors/id/L/LE/LEEJO/Test-LeakTrace-$version.tarsource=.gz"
options=!checksum
sha512sums=57ffd8c64ef871427c04419bda239d73e169f3b6ee268e0d4d7a27942c277d4b1f502e82e2e0df415b1050c0aa11944c2c3acb2e9b353855f77c91d1dfcaf00d
_distdir=Test-LeakTrace-$version

build-delete {
   export PERL_MM_USE_DEFAULT=1 PERL5LIB=                 \
      PERL_AUTOINSTALL=--skipdeps                            \
      PERL_MM_OPT=INSTALLDIRS=vendor DESTDIR=$PKG     \
      PERL_MB_OPT=--installdirs vendor --destdir $PKG \
      PERL_USE_UNSAFE_INC=1 \
      MODULEBUILDRC=/dev/null

    cd $srcdir/$_distdir
    /usr/bin/perl Makefile.PL
    make
  
}

check {
  cd $srcdir/$_distdir
   export PERL_MM_USE_DEFAULT=1 PERL5LIB=
    make test
  
}

build() {
  cd $srcdir/$_distdir
  make install

  find $PKG -name .packlist -o -name perllocal.pod -delete
}

# Local Variables:
# mode: shell-script
# sh-basic-offset: 2
# End:
# vim:set ts=2 sw=2 et:
