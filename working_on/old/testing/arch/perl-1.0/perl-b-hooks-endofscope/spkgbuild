# description : Execute code after a scope finished compilation
# depends : perl-module-implementation

name=perl-b-hooks-endofscope
_cpanname=B-Hooks-EndOfScope
version=0.24
release=3
	 perl-module-runtime
	 perl-sub-exporter
	 perl-sub-exporter-progressive
	 perl-try-tiny
	 perl-variable-magic>=0.34
	 perl>=5.5.0
url=https://search.cpan.org/~bobtfish/B-Hooks-EndOfScope-$version/
source="https://search.cpan.org/CPAN/authors/id/E/ET/ETHER/B-Hooks-EndOfScope-$version.tarsource=.gz"
options=!checksum
sha256sums=03aa3dfe5d0aa6471a96f43fe8318179d19794d4a640708f0288f9216ec7acc6

build-delete {
	cd $srcdir/B-Hooks-EndOfScope-$version
	PERL_MM_USE_DEFAULT=1 perl Makefile.PL INSTALLDIRS=vendor
	make
}

check {
	cd $srcdir/B-Hooks-EndOfScope-$version
	make test
}

build() {
	cd $srcdir/B-Hooks-EndOfScope-$version
	make install DESTDIR=$PKG
	# Remove perllocal.pod and .packlist.
	find $PKG -name .packlist -o -name perllocal.pod -delete
}
