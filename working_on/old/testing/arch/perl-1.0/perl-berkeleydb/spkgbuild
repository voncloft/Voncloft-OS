# description : Interface to Berkeley DB version 2, 3 or 4
# depends : perl db

name=perl-berkeleydb
version=0.55
release=9
url=https://search.cpan.org/dist/BerkeleyDB/
source="https://search.cpan.org/CPAN/authors/id/P/PM/PMQS/BerkeleyDB-$version.tarsource=.gz"
options=!checksum
md5sums=7aa018597792a2f56e80f31d3fe76fa2

build-delete {
  cd  $srcdir/BerkeleyDB-$version
  PERL_MM_USE_DEFAULT=1 perl Makefile.PL INSTALLDIRS=vendor
  make
}

build() {
  _dbver1=`pacman -Q db | cut -d\  -f2 | cut -d- -f1 | cut -f1 -d.`
  _dbver2=`pacman -Q db | cut -d\  -f2 | cut -d- -f1 | cut -f2 -d.`
  # depends : perl db>=${_dbver1}.${_dbver2} db<${_dbver1}.$expr $_dbver2 + 1

  cd  $srcdir/BerkeleyDB-$version
  make pure_install doc_install DESTDIR=$PKG
  find $PKG -name .packlist -delete
  find $PKG -name *.pod -delete
}
