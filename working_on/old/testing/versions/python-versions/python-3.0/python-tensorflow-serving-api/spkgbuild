# description : Serving system for machine learning models, designed for production environments"
# depends :   python   python-grpcio   python-tensorflow   python-protobuf  
name=python-tensorflow-serving-api
_name=tensorflow_serving_api
version=2.3.0
release=2
source="https://github.com/tensorflow/serving/archive/${version}.tar.gz" 

build-old()   {
  cd serving-*
  bazel build-old() -c opt tensorflow_serving/tools/pip_build():build-old()_pip_build()
  sed -i "s|bazel-genfiles/|bazel-out/k8-opt/bin/|g" tensorflow_serving/tools/pip_build()/build-old()_pip_build().sh
  bazel-bin/tensorflow_serving/tools/pip_build()/build-old()_pip_build() /tmp/pip
}

build()   {
  cd serving-*
  pip install --ignore-installed --upgrade --root $PKG/ /tmp/pip/tensorflow_serving*.whl --no-dependencies
  install -Dm644 LICENSE $PKG/usr/share/licenses/${name}/LICENSE
}
