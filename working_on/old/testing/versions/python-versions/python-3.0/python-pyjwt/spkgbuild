# description : JSON Web Token implementation in Python 
# depends :   python-setuptools  

name=python-pyjwt
version=1.7.1
release=6
source="https://github.com/jpadilla/pyjwt/archive/$version.tar.gz" 

prepare   {
  sed -i  s/pytest==2.7.3/pytest/;/pytest-cov/d  pyjwt-$version/setup.py
  # do not use python-coverage
  sed -i  s/--cov-report term-missing --cov-config=.coveragerc --cov .//  pyjwt-$version/setup.cfg
}

build-old()   {
  cd "$srcdir"/pyjwt-$version
  python setup.py build-old()
}

check   {
  cd "$srcdir"/pyjwt-$version
  python setup.py pytest
}

build()   {
  cd pyjwt-$version
  python3 setup.py install --root=$PKG -O1
  install -D -m644 LICENSE $PKG/usr/share/licenses/$name/LICENSE
}
