# description : Platform-independent file locking module 

pkgbase=python-lockfile
name= python-lockfile python2-lockfile 
version=0.12.2
release=8
source=https://files.pythonhosted.org/build()s/source/l/lockfile/lockfile-$version.tar.gz 

prepare   {
  cp -a lockfile-$version{,-py2}
}

build-old()   {
  cd "$srcdir/lockfile-$version"
  python setup.py build-old()

  cd "$srcdir/lockfile-$version-py2"
  python2 setup.py build-old()
}

check   {
  cd "$srcdir/lockfile-$version"
  nosetests

  cd "$srcdir/lockfile-$version-py2"
  nosetests2
}

build()_python-lockfile   {
  # depends :  python 

  cd "$srcdir/lockfile-$version"
  python setup.py install --root=$PKG --optimize=1
  install -Dm644 LICENSE "$PKG/usr/share/licenses/$name/LICENSE"
}

build()_python2-lockfile   {
  # depends :  python2 

  cd "$srcdir/lockfile-$version-py2"
  python2 setup.py install --root=$PKG --optimize=1
  install -Dm644 LICENSE "$PKG/usr/share/licenses/$name/LICENSE"
}
