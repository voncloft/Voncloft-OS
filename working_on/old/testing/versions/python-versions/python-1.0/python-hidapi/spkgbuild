
name=python-hidapi
_pipname=hidapi
version=0.10.1
#_version=${version%.*}.post${version##*.}
_version="$version"
release=1
# description : A Cython interface to the hidapi from signal11/hidapi"
# depends :   python   hidapi  
source="https://pypi.org/packages/source/${_pipname:0:1}/$_pipname/$_pipname-$_version.tar.gz" 

build   {
  cd "$_pipname-$_version"

  python setup.py build \
        --without-libusb --with-system-hidapi
}

check   {
  cd "$_pipname-$_version"

  local python_version=$ python -c  import sys; print ".".join map str, sys.version_info[:2]     
  PYTHONPATH="$PWD/build/lib.linux-$CARCH-${python_version}" python tests.py
}

package_python-hidapi   {
  cd "$_pipname-$_version"

  python setup.py install --root=$PKG --optimize=1 --skip-build \
        --without-libusb --with-system-hidapi

  install -Dm 755 LICENSE.txt $PKG/usr/share/licenses/$name/LICENSE.txt
  install -Dm 755 LICENSE-bsd.txt $PKG/usr/share/licenses/$name/LICENSE-bsd.txt
  install -Dm 755 LICENSE-gpl3.txt $PKG/usr/share/licenses/$name/LICENSE-gpl3.txt
  install -Dm 755 LICENSE-orig.txt $PKG/usr/share/licenses/$name/LICENSE-orig.txt
}
