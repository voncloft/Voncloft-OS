
_name=pytesseract
name=python-pytesseract
version=0.3.7
release=1
# description : Python wrapper for Google Tesseract 
# depends :   python-pillow   python-setuptools   tesseract  
source="$url/archive/v$version/$_name-v$version.tar.gz" 

build   {
  cd $_name-$version
  python setup.py build
}

check   {
  cd $_name-$version
  mkdir -p temp
  local sitepackages=$ python -c "import site; print site.getsitepackages  [0] " 
  python setup.py install --skip-build --root=temp
  PATH="$PWD/temp/usr/bin:$PATH" PYTHONPATH="$PWD/temp/$sitepackages" pytest -k  not test_image_to_data_common_output[dict]  #https://github.com/madmaze/pytesseract/issues/298
}

package   {
  cd $_name-$version
  export PYTHONHASHSEED=0
  python setup.py install --root=$PKG --optimize=1 --skip-build
}
