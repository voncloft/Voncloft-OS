
_name=flake8-black
name=python-flake8-black
version=0.2.1
release=4
# description : Flake8 plugin to call black as a code style validator 
# depends :   flake8   python-black   python-setuptools  
source="$url/archive/v$version/$_name-v$version.tar.gz" 

build   {
  cd $_name-$version
  python setup.py build
}

check   {
  cd $_name-$version
  mkdir -p temp
  local sitepackages=$ python -c "import site; print site.getsitepackages  [0] " 
  python setup.py install --skip-build --root=temp
  cd tests
  PATH="${PWD%/tests}/temp/usr/bin:$PATH" PYTHONPATH="${PWD%/tests}/temp/$sitepackages" ./run_tests.sh
}

package   {
  cd $_name-$version
  export PYTHONHASHSEED=0
  python setup.py install --root=$PKG --optimize=1 --skip-build
  install -Dm644 -t $PKG/usr/share/licenses/$name LICENSE.rst
}
