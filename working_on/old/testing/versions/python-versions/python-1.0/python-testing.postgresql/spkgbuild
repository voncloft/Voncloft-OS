
name=python-testing.postgresql
version=1.3.0
release=5
# description : Helpers for using temporary PostgreSQL databases in tests 
# depends :  python-testing.common.database python-pg8000 postgresql 
source="$name-$version.tar.gz"::"https://github.com/tk0miya/testing.postgresql/archive/$version.tar.gz"
       https://github.com/tk0miya/testing.postgresql/commit/738c8eb19a4b064dd74ff851c379dd1cbf11bc65.patch 
             3fac5ec62af8ec6a1a15c3e8f7c71597de4bd3e9496d632bbdd6ce0d9b8da56e  

prepare   {
  cd testing.postgresql-$version

  # fix tests
  patch -Np1 -i ../738c8eb19a4b064dd74ff851c379dd1cbf11bc65.patch
}

build   {
  cd testing.postgresql-$version
  python setup.py build
}

check   {
  cd testing.postgresql-$version
  nosetests -v
}

package   {
  cd testing.postgresql-$version
  python setup.py install --root=$PKG --optimize=1 --skip-build
}
