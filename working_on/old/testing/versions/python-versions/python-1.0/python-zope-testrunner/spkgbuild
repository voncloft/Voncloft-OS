
pkgbase=python-zope-testrunner
name=  python-zope-testrunner   python2-zope-testrunner  
version=5.2
release=3
# description : Zope testrunner script"
              python2-zope-interface   python-zope-exceptions   python2-zope-exceptions 
              python-six   python2-six  
               python2-zope-testrunner   python-virtualenv   python2-virtualenv  
source="$pkgbase-$version.tar.gz::https://github.com/zopefoundation/zope.testrunner/archive/$version.tar.gz" 

prepare   {
  cp -a zope.testrunner-$version{,-py2}
}

build   {
  cd "$srcdir"/zope.testrunner-$version
  python setup.py build

  cd "$srcdir"/zope.testrunner-$version-py2
  python2 setup.py build
}

check   {
  cd "$srcdir"/zope.testrunner-$version
  virtualenv "$srcdir/pyvenv" --system-site-packages
   
    . "$srcdir/pyvenv/bin/activate"
    python setup.py develop
    python setup.py test
   

  cd "$srcdir"/zope.testrunner-$version-py2
  virtualenv2 "$srcdir/pyvenv-py2" --system-site-packages
   
    . "$srcdir/pyvenv-py2/bin/activate"
    python2 setup.py develop
    python2 setup.py test
   
}

package_python-zope-testrunner   {
  # depends :   python-setuptools   python-zope-interface   python-zope-exceptions   python-six  

  cd zope.testrunner-$version
  python setup.py install --root=$PKG --optimize=1
}

package_python2-zope-testrunner   {
  # depends :   python2-setuptools   python2-zope-interface   python2-zope-exceptions   python2-six  

  cd zope.testrunner-$version-py2
  python2 setup.py install --root=$PKG --optimize=1

  mv $PKG/usr/bin/zope-testrunner{,2}
}

# vim:set ts=2 sw=2 et:
