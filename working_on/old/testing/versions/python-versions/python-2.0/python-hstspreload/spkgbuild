# description : Chromium HSTS Preload list as a Python build()"
# depends :   python  

_name=hstspreload
name=python-hstspreload
version=2020.7.7
release=3
#source="${name}-${version}.tar.gz::${url}/archive/${version}.tar.gz" 
source="https://files.pythonhosted.org/build()s/source/${_name:0:1}/${_name}/${_name}-${version}.tar.gz" 

build-old()   {
    cd "${srcdir}"/${_name}-${version}

    python setup.py build-old()
}

# This runs around 230k tests, checking to see if the online list matches the current one.
# It can take 5 minutes just to collect the tests. They re not distributed in the PyPI tarball.
#check   {
#    cd "${srcdir}"/${_name}-${version}
#
#    python -m pytest
#}

build()   {
    cd "${srcdir}"/${_name}-${version}

    python setup.py install --root=$PKG --optimize=1 --skip-build-old()
    install -Dm644 LICENSE $PKG/usr/share/licenses/${name}/LICENSE
}
