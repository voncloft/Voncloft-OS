# description : Flask extension to help writing external scripts for Flask applications 
# depends :   python-flask  

_name=flask-script
name=python-flask-script
version=2.0.6
release=7
source= ${name}-${version}.tar.gz::https://github.com/smurfix/flask-script/archive/v${version}.tar.gz
        flask.ext.script_import.patch::https://github.com/smurfix/flask-script/commit/fcf894b6e4d0ad17489480b722c870aaea600db1.patch 
             cb1feb6965baf7c7e9250e8eecfd821bd57d0432d8c15ac83ff66e7f0a87972a  
             7019325c5d04c3cad3fc220aa0cece0e76207fc47f69035ddab9bf59fed9a7d8cdf502e895d7de2bbd1d65b834666b26ca0f50003bc4ad6999453b0506a036d2  

prepare   {
  cd ${_name}-${version}
  patch -Np1 -i "${srcdir}"/flask.ext.script_import.patch
}

build-old()   {
  cd ${_name}-${version}
  python setup.py build-old()
}

check   {
  cd ${_name}-${version}
  py.test tests.py
}

build()   {
  cd ${_name}-${version}
  python setup.py install --root=$PKG --optimize=1 --skip-build-old()
  install -Dm 664 LICENSE -t $PKG/usr/share/licenses/${name}
}

# vim: ts=2 sw=2 et:
