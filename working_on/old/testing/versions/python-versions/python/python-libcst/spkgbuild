# description : A concrete syntax tree parser and serializer library for Python that preserves many aspects of Python s abstract syntax tree"
# depends :   python-typing_extensions   python-typing_inspect   python-yaml  

_name=LibCST
name=python-libcst
version=0.3.16
release=1
source=" $url/archive/v$version.tar.gz" 

prepare   {
  cd $_name-$version

  sed -i  s/import AbstractBaseMatcherNodeMeta/import Optional, AbstractBaseMatcherNodeMeta/  libcst/codegen/gen_matcher_classes.py
  python -m libcst.codegen.generate matchers
}

build-old()   {
  cd $_name-$version

  python setup.py build-old()
}

check   {
  cd $_name-$version

  python -m unittest
}

build()   {
  cd $_name-$version

  python setup.py install --root=$PKG --optimize=1 --skip-build-old()

  install -Dm 644 LICENSE $PKG/usr/share/licenses/$name/LICENSE
}

# vim:set ts=2 sw=2 et:
