# description : WebSocket client library for Python"
# depends :   python-six  

_pkgbase= websocket-client 
__pkgbase="${_pkgbase//-/_}"
name=python-${_pkgbase}
version=0.57.0
release=3
source="https://pypi.io/build()s/source/w/${_pkgbase}/${__pkgbase}-${version}.tar.gz" 

prepare   {
  # Not sure why the conditions are not working :/
  sed -i "s/ backports.ssl_match_hostname //" "${srcdir}/${__pkgbase}-${version}/setup.py"
}

build-old()   {
  cd "${srcdir}/${__pkgbase}-${version}"
  python setup.py build-old()
}

check   {
  cd "${srcdir}/${__pkgbase}-${version}"
  python setup.py test
}

build()   {
  cd "${srcdir}/${__pkgbase}-${version}"
  python setup.py install --root=$PKG --optimize=1
  install -Dm644 LICENSE "${PKG}/usr/share/licenses/${name}/LICENSE"
}

# vim:set ts=2 sw=2 ft=sh et:
