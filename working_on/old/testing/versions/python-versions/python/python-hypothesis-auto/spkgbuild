# description : Extends Hypothesis to add fully automatic testing of type annotated functions"
# depends :   python-pydantic   python-hypothesis  

name=python-hypothesis-auto
version=1.1.4
_commit=4ed588ab631d6c44c8959334a3425a8c0d207eff
release=3
source="https://github.com/timothycrosley/hypothesis-auto/archive/$_commit/$name-$_commit.tar.gz" 

prepare   {
  cd hypothesis-auto-$_commit
  # poetry-generated setup.py are fatally broken, see:
  #https://github.com/sdispater/poetry/issues/866
  dephell deps convert --from pyproject.toml --to setup.py
}

build-old()   {
  cd hypothesis-auto-$_commit
  python setup.py build-old()
}

check   {
  cd hypothesis-auto-$_commit
  python -m pytest
}

build()   {
  cd hypothesis-auto-$_commit
  python setup.py install --root=$PKG --optimize=1

  install -Dm644 LICENSE -t $PKG/usr/share/licenses/$name/
}
