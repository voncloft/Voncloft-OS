
name=python-pyelftools
_name=pyelftools
version=0.27
release=1
# description : 'Python library for analyzing ELF files and DWARF debugging information'
# depends : ('python')
options=('!strip')


build-remove() {
  cd ${_name}-${version}
  python setup.py build
}

check() {
  cd ${_name}-${version}
  python test/run_all_unittests.py
  python test/run_examples_test.py
  if [ "${CARCH}" == "x86_64" ]; then
    python test/run_readelf_tests.py
  else
    echo "Skipping readelf tests (require x86_64)"
  fi
}

build() {
  cd ${_name}-${version}
  python setup.py install -O1 --root="${pkgdir}" --skip-build
  install -Dm 644 README.rst CHANGES -t "${pkgdir}/usr/share/doc/${name}"
  cp -r examples "${pkgdir}/usr/share/doc/${name}"
}
