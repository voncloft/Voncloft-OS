# description	: A non-linear video editor for Linux using the MLT video framework
# depends	: mlt extra-cmake-modules kdoctools python3 v4l-utils

name=kdenlive
version=20.12.1
release=1
source="https://download.kde.org/stable/release-service/$version/src/kdenlive-$version.tar.xz"

options="!checksums"
build() {
	cd $name-$version

	sed -e '/KLocal/a #include <functional>' \
	    -i src/profiles/tree/profiletreemodel.cpp

	sed -e '/abs/s/leftDist/(int)&/' \
	    -i src/scopes/audioscopes/spectrogram.cpp

	mkdir build
	cd    build
	
	cmake -DCMAKE_INSTALL_PREFIX=/opt/kf5	 \
	      -DCMAKE_BUILD_TYPE=Release         \
	      -DBUILD_TESTING=OFF                \
	      -Wno-dev ..
	make
	make DESTDIR=$PKG install
}

