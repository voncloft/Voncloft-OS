# description : safely and cleanly create closures via string eval
# depends : perl-try-tiny perl-sub-exporter
# Montainer: 3ED <krzysztof1987 at gmail dot com>
#

name=perl-eval-closure
_lastauthor=D/DO/DOY
_name=Eval-Closure
version=0.14
release=6
check# depends : perl-test-requires perl-test-fatal perl-test-output
url=https://metacpan.org/release/${_name}
source="https://cpan.metacpan.org/authors/id/${_lastauthor}/${_name}-${version}.tar.gz"
options="!checksum"
md5sums=ceeb1fc579ac9af981fa6b600538c285

build-delete {
  export PERL_MM_USE_DEFAULT=1 PERL_AUTOINSTALL=--skipdeps \
    PERL_MM_OPT=INSTALLDIRS=vendor DESTDIR=$PKG \
    PERL_MB_OPT=--installdirs vendor --destdir $PKG \
    MODULEBUILDRC=/dev/null

  cd ${srcdir}/${_name}-${version}
  perl Makefile.PL
  make
}
check {
  cd ${srcdir}/${_name}-${version}
  make test
}
build() {
  cd ${srcdir}/${_name}-${version}
  make install
}
build() {
   cd
   perl Makefile.PL
   make
   make DESTDIR=$PKG install
}
