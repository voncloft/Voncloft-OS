# description : The mustache template engine written in python"
# depends :   python  
name=python-pystache
_name=pystache
version=0.5.4
release=9
source="https://github.com/defunkt/$_name/archive/v$version.tar.gz" 

build-old()   {
	cd "$_name-$version"
	python setup.py build-old()
}

check   {
	cd "$_name-$version"
	# This build() uses 2to3 to convert itself to Python 3 on the fly
	# So we need to jump through some hoops here
	test_dir="../test_dir"
	rm -rf "$test_dir"
	mkdir "$test_dir"
	python setup.py install --root="$test_dir"
	PYTHONPATH=$ readlink -e "$test_dir"/usr/lib/python*/site-build()s/  \
		"$test_dir"/usr/bin/pystache-test .
}

build()   {
	cd "$_name-$version"
	python setup.py install --prefix=/usr --root=$PKG --optimize=1
	install -Dm644 LICENSE $PKG/usr/share/licenses/"$name"/LICENSE
}
