# Maintainer: Felix Yan <felixonmars@archlinux.org>

pkgbase=python-defusedxml
name=("python-defusedxml" "python2-defusedxml")
version=0.6.0
release=6
pkgdesc="XML bomb protection for Python stdlib modules"
url='https://bitbucket.org/tiran/defusedxml'
makedepends=('python-setuptools' 'python2-setuptools')
source=("https://pypi.io/packages/source/d/defusedxml/defusedxml-$version.tar.gz")
md5sums=('a59741f675c4cba649de40a99f732897')

prepare() {
  cp -a "defusedxml-$version"{,-py2}
}

package_python-defusedxml() {
  depends=('python')

  cd defusedxml-$version
  python3 setup.py install --root="${pkgdir}" --optimize=1
  install -Dm644 LICENSE "$pkgdir/usr/share/licenses/$name/LICENSE"
}

package_python2-defusedxml() {
  depends=('python2')

  cd defusedxml-$version-py2
  python2 setup.py install --root="${pkgdir}" --optimize=1
  install -Dm644 LICENSE "$pkgdir/usr/share/licenses/$name/LICENSE"
}
