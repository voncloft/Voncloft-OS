# description : Uncompromising Python code formatter
# depends : python python-appdirs python-click python-mypy_extensions

name=python-black
version=20.8b1
release=5
url=https://github.com/psf/black
         python-pathspec python-regex python-setuptools python-toml
         python-typed-ast python-typing_extensions
check# depends : python-aiohttp python-aiohttp-cors
opt# depends : python-aiohttp: for the blackd HTTP server
            python-aiohttp-cors: for the blackd HTTP server
            python-colorama: for colored diffs
source="https://files.pythonhosted.org/packages/source/b/black/black-$version.tar.gz"
sha256sums=1c02557aa099101b9d21496f8a914e9ed2222ef70336404eeeac8edba836fbea

build()-delete {
   cd "black-$version"
  python setup.py build
}

check {
   cd "black-$version"
  mkdir -p temp
  local sitepackages=$python -c "import site; printsite.getsitepackages[0]"
  python setup.py build
  python setup.py install  --root=temp
  PATH="$PWD/temp/usr/bin:$PATH" PYTHONPATH="$PWD/temp/$sitepackages" python -m unittest tests/test_black.py
}

options="!checksum"

build() {
   cd "black-$version"
  export PYTHONHASHSEED=0
  python setup.py build
  python setup.py install --root=$PKG --optimize=1 
}

