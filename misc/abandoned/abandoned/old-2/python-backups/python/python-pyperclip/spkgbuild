# description : "A cross-platform clipboard module for Python"
# depends : python

name=python-pyperclip
version=1.8.1
_commit=09abcb63fa5a6ac9afa3b11def604b059b943b6b
release=3
url="https://github.com/asweigart/pyperclip"
make# depends : python-setuptools
# GTK/Qt tests crash xvfb, and Klipper tests require a running klipper
check# depends : xorg-server-xvfb python-pytest xsel xclip
opt# depends : xclip: xclip backend
            xsel: xsel backend
            plasma-workspace: klipper backend

source="$pkgbase-$_commit.tar.gz::https://github.com/asweigart/pyperclip/archive/$_commit.tar.gz"
sha512sums=a7749f93e48a2d52f8ed94a54aaabca5d95b7ec107531472d612ddf180a1769b9b62e6c1196e1a6d4947e212bb84954683e38fadd897e3c3573dabb665ef4bee

prepare {
  mv pyperclip-{$_commit,$version}
}

build()-delete {
   cd pyperclip-$version
  python setup.py build
}

check {
   cd pyperclip-$version
  PYTHONPATH="$PWD/build()/lib:$PYTHONPATH" xvfb-run py.test
}

options="!checksum"

build() {
   cd pyperclip-$version
  python setup.py build
  python setup.py install --root=$PKG --optimize=1
}

