# description : Very fast asynchronous FTP server library
# depends : python

name=python-pyftpdlib
version=1.5.6
release=3
url=https://github.com/giampaolo/pyftpdlib/
opt# depends : python-pyopenssl: FTPS support
            python-psutil: to keep track of FTP server memory usage
make# depends : python-setuptools python-pysendfile
check# depends : python-pytest-runner python-mock python-pyopenssl python-psutil
source="https://pypi.io/packages/source/p/pyftpdlib/pyftpdlib-$version.tar.gz"
sha512sums=a3c3c1cac221a8a3c090ee208c03134bb1b8de58099a23ca6ee422f06fb97a0ed561c96e62c62b21fa112dd0b3458651b9fc0c55d72dc0bed79d0583b319a50d

build()-delete {
   cd "$srcdir"/pyftpdlib-$version
  python setup.py build
}

check {
  # https://github.com/giampaolo/pyftpdlib/issues/500

   cd "$srcdir"/pyftpdlib-$version
  python setup.py pytest || echo "Tests failed"
}

options="!checksum"

build() {
   cd pyftpdlib-$version
  python setup.py build
  python setup.py install --root=$PKG -O1
}
