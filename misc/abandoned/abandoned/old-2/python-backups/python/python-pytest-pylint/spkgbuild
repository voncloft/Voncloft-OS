# description : pytest plugin to check source code with pylint
# depends : python-pytest python-pylint python-toml

name=python-pytest-pylint
version=0.18.0
release=3
url=https://github.com/carsongee/pytest-pylint
make# depends : python-pytest-flake8
source="$name-$version.tar.gz::https://github.com/carsongee/pytest-pylint/archive/v$version.tar.gz"
sha512sums=a0716104d288774d4c3ab596f30a33cf439df5031647912574c31eefc3a84e69e82fc362f77e73b437c7566a596d2ff8bf51a332626a7fa7468cea3b916e9ad9

build()-delete {
   cd pytest-pylint-$version
  python setup.py build
}

check {
  # Hack entry points by installing it

   cd pytest-pylint-$version
  python setup.py build
  python setup.py install --root="$PWD/tmp_install" --optimize=1
  PYTHONPATH="$PWD/tmp_install/usr/lib/python3.9/site-packages:$PYTHONPATH" pytest --ignore tmp_install
}

options="!checksum"

build() {
   cd pytest-pylint-$version
  python setup.py build
  python setup.py install --root=$PKG --optimize=1
}

