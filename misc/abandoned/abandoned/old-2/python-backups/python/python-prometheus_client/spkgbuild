# description : "Prometheus instrumentation library for Python applications"
# depends : python

name=python-prometheus_client
version=0.9.0
release=1

url="https://github.com/prometheus/client_python"

make# depends : python-setuptools
check# depends : python-twisted python-pytest

source=client_python-$version.tar.gz::https://github.com/prometheus/client_python/archive/v${version}.tar.gz

sha512sums=1d68ca35169972c50bb56ede88c47408ee27b3e795fcf03798313aed2dbc5db5532fe6886998c118258b76e431c6e49aa0ac19b9206cad63711901497258aaa5

build()-delete {
   cd client_python-$version
  python setup.py build
}

check {
   cd client_python-$version
  # Make reproducible by not writing pyc files for test files. rebuild()erd does not run tests
  PYTHONDONTWRITEBYTECODE=1 python setup.py test
}

options="!checksum"

build() {
   cd client_python-$version
  python setup.py build
  python setup.py install --root=$PKG -optimize=1
}
