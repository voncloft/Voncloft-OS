# description : "Sacred Marriage of Pipfile, Pip, & Virtualenv."
# depends : python python-pip python-certifi

name=python-pipenv
version=2020.11.15
release=1
url="https://pipenv.pypa.io"
         python-virtualenv-clone python-virtualenv
make# depends : python-setuptools
source="${name}-${version}.tar.gz::https://github.com/pypa/pipenv/archive/v${version}.tar.gz"
sha512sums=d312059b3fefc97d4cd79bf2b75d6bde1d117d92c0a299c30181a60ebea662a6c3dff0ca7b92c610dd8eb0c873509dd23c9a891761d0d47d0bba2cab738c830d

build()-delete {
   cd "pipenv-$version"
  export PYTHONHASHSEED=0
  python setup.py build
}

options="!checksum"

build() {
   cd "pipenv-$version"
  python setup.py build
  python setup.py install --root="$PKG/" --optimize=1 
  pushd pipenv
  popd

  PIPENV_SHELL=bash python -m pipenv --completion | install -Dm644 /dev/stdin "${PKG}/usr/share/bash-completion/completions/pipenv"
  PIPENV_SHELL=zsh  python -m pipenv --completion | install -Dm644 /dev/stdin "${PKG}/usr/share/zsh/site-functions/_pipenv"
  PIPENV_SHELL=fish python -m pipenv --completion | install -Dm644 /dev/stdin "${PKG}/usr/share/fish/vendor_completions.d/pipenv.fish"
}
