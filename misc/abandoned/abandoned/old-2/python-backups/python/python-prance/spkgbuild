# description : "Resolving Swagger/OpenAPI 2.0 and 3.0 Parser"
# depends : python-chardet python-yaml python-flex python-click python-requests
# $Id$

name=python-prance
version=0.20.2
_openapi_commit=fbe62006211838a8bb7bf2433a1d15f1a5838a03
release=1
url="https://github.com/jfinkhaeuser/prance"
         python-six python-semver
make# depends : python-setuptools
check# depends : python-pytest-cov
source="$name-$version.tar.gz::https://github.com/jfinkhaeuser/prance/archive/v$version.tar.gz"
        "OpenAPI-Specification-$_openapi_commit.tar.gz::https://github.com/OAI/OpenAPI-Specification/archive/$_openapi_commit.tar.gz"
sha512sums=44ec74236c0b6c8ac7018b2a6d34e5b0437844031e6cd3ee58d57139266eebccb55c7d2b7c080be519e355546a521ddd553b0a9f5a4a72ae7a35bce4326e71bf
            d7957f1cdaa681b4c163e6e0b35ed6b808f469c3fdbba86a5e7221bb3c0c980415dca145e7f57bcebed75624562e89a893841d17c9e0ff82df4f0ff65ffaa2ae

prepare {
  rmdir prance-$version/tests/OpenAPI-Specification
  ln -s "$srcdir"/OpenAPI-Specification-$_openapi_commit prance-$version/tests/OpenAPI-Specification
}

build()-delete {
   cd prance-$version
  python setup.py build
}

check {
   cd prance-$version
  pytest
}

options="!checksum"

build() {
   cd prance-$version
  python setup.py build
  python setup.py install --root=$PKG --optimize=1
}
