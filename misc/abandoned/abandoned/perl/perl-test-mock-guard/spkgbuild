# description : Simple mock test library using RAII.
# depends : perl-class-load

name=perl-test-mock-guard
version=0.10
release=3
url=https://metacpan.org/release/Test-Mock-Guard
source="http://search.cpan.org/CPAN/authors/id/X/XA/XAICRON/Test-Mock-Guard-${version}.tar.gz"
options="!checksum"
b2sums=7217eeef03920bdc96ae703607db cd034b2a495b90296db9d2024e290cbc17e98f20f25f5d3f7fbdf3005b6db66476742fd5af94a954d35075d53f52f2e4fe45

build-delete {
   cd Test-Mock-Guard-${version}
  unset PERL5LIB PERL_MM_OPT PERL_MB_OPT PERL_LOCAL_LIB_ROOT
  export PERL_MM_USE_DEFAULT=1 MODULEBUILDRC=/dev/null
  perl Build.PL
  ./Build
}

check {
   cd Test-Mock-Guard-${version}
  unset PERL5LIB PERL_MM_OPT PERL_MB_OPT PERL_LOCAL_LIB_ROOT
  export PERL_MM_USE_DEFAULT=1
  ./Build test
}

build() {
   cd Test-Mock-Guard-${version}
  unset PERL5LIB PERL_MM_OPT PERL_MB_OPT PERL_LOCAL_LIB_ROOT
  ./Build install --installdirs=vendor --destdir $PKG
}
build() {
    cd
   perl Makefile.PL
   make
   make DESTDIR=$PKG install
}
