# description : Utility for looking for perl objects that are not reclaimed.
# depends : perl
# Generator  : CPANPLUS::Dist::Arch 1.29

name=perl-devel-leak
version=0.03
release=10
url=https://search.mcpan.org/dist/Devel-Leak
source="https://search.mcpan.org/CPAN/authors/id/N/NI/NI-S/Devel-Leak-$version.tarsource=.gz"
options=!checksum
sha512sums=177f64b87fa6ab08b93f7c5bfcbaf4421e8431bf795976a0a7efa0120828984fed29a2bc12918e5bea9ea3edccf6316ba8daf704f349aece84b45bdd11f57707
_distdir=Devel-Leak-$version

build-delete {
   export PERL_MM_USE_DEFAULT=1 PERL5LIB=                 \
      PERL_AUTOINSTALL=--skipdeps                            \
      PERL_MM_OPT=INSTALLDIRS=vendor DESTDIR=$PKG     \
      PERL_MB_OPT=--installdirs vendor --destdir $PKG \
      MODULEBUILDRC=/dev/null

    cd $srcdir/$_distdir
    /usr/bin/perl Makefile.PL
    make
  
}

check {
  cd $srcdir/$_distdir
   export PERL_MM_USE_DEFAULT=1 PERL5LIB=
    make test
  
}

build() {
  cd $srcdir/$_distdir
  make install

  find $PKG -name .packlist -o -name perllocal.pod -delete
}

# Local Variables:
# mode: shell-script
# sh-basic-offset: 2
# End:
# vim:set ts=2 sw=2 et:
