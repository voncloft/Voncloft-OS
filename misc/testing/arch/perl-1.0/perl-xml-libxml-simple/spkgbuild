# description : An analogue of XML::Simple using libxml
# depends : perl perl-xml-libxml perl-file-slurp-tiny
# $ID$

name=perl-xml-libxml-simple
_dist=XML-LibXML-Simple
version=0.99
release=4
url=https://metacpan.org/release/${_dist}
source="https://search.cpan.org/CPAN/authors/id/M/MA/MARKOV/${_dist}-${version}.tarsource=.gz"
options=!checksum
md5sums=15b7cbe0887e292057fbcfcb3d87ef2e
sha512sums=806e039eefb447c43c747d1621bb432a3df13cb36798853ef2fe8a0ccaa1d7651d67fd6d386e19936100ffd4c04185004e5f0bb4ced66ed544efb6d6157b4e47

build-delete {
    cd ${srcdir}/${_dist}-${version}
    unset PERL5LIB PERL_MM_OPT PERL_MB_OPT PERL_LOCAL_LIB_ROOT
    export PERL_MM_USE_DEFAULT=1 PERL_AUTOINSTALL=--skipdeps
    perl Makefile.PL
    make
}

check {
    cd ${srcdir}/${_dist}-${version}
    unset PERL5LIB PERL_MM_OPT PERL_MB_OPT PERL_LOCAL_LIB_ROOT
    export PERL_MM_USE_DEFAULT=1
    make test
}

build() {
    cd ${srcdir}/${_dist}-${version}
    unset PERL5LIB PERL_MM_OPT PERL_MB_OPT PERL_LOCAL_LIB_ROOT
    make install INSTALLDIRS=vendor DESTDIR=$PKG
}
