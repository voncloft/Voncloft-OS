# description : Play with other peoples lexical variables
# depends : perl

name=perl-padwalker
_perl_module=PadWalker
version=2.5
release=1
url=https://metacpan.org/release/${_perl_module}
source="https://cpan.metacpan.org/authors/id/R/RO/ROBIN/${_perl_module}-${version}.tarsource=.gz"
options=!checksum
sha256sums=07b26abb841146af32072a8d68cb90176ffb176fd9268e6f2f7d106f817a0cd0

build-delete {
  cd ${_perl_module}-${version}
  unset PERL5LIB PERL_MM_OPT PERL_MB_OPT PERL_LOCAL_LIB_ROOT
  export PERL_MM_USE_DEFAULT=1 PERL_AUTOINSTALL=--skipdeps
  perl Makefile.PL
  make
}

check {
  cd ${_perl_module}-${version}
  unset PERL5LIB PERL_MM_OPT PERL_MB_OPT PERL_LOCAL_LIB_ROOT
  export PERL_MM_USE_DEFAULT=1
  make test
}

build() {
  cd ${_perl_module}-${version}
  unset PERL5LIB PERL_MM_OPT PERL_MB_OPT PERL_LOCAL_LIB_ROOT
  make pure_install INSTALLDIRS=vendor DESTDIR=$PKG
}
