# description : Low-level HTTP connection client
# depends : perl

name=perl-net-http
version=6.20
release=1
url=https://search.cpan.org/dist/Net-HTTP
check# depends : perl-uri
conflicts=perl-libwww<6
source="https://cpan.metacpan.org/authors/id/O/OA/OALDERS/Net-HTTP-$version.tarsource=.gz"
options=!checksum
sha512sums=8a33e395ec4b2b2f32ffce653f0fe7cb2854512868b39ec4d0d05be00266971529a62f417c3fdcca512df78262fa7e269e271ff78458653dae7e50eb185f2aff

build-delete {
    export PERL_MM_USE_DEFAULT=1 PERL5LIB=                 \
      PERL_AUTOINSTALL=--skipdeps                            \
      PERL_MM_OPT=INSTALLDIRS=vendor     \
      PERL_MB_OPT=--installdirs vendor \
      MODULEBUILDRC=/dev/null

    cd Net-HTTP-${version}
    /usr/bin/perl Makefile.PL
    make
}

check {
    export PERL_MM_USE_DEFAULT=1 PERL5LIB=
    cd Net-HTTP-${version}
    make test
}

build() {
    cd Net-HTTP-${version}
    make DESTDIR=$PKG install
}

# Local Variables:
# mode: shell-script
# sh-basic-offset: 2
# End:
# vim:set ts=2 sw=2 et:
