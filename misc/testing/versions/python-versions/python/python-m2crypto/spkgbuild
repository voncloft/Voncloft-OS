# description : A crypto and SSL toolkit for Python"

pkgbase=python-m2crypto
name= python2-m2crypto python-m2crypto 
version=0.37.1
release=1
              python2   python2-setuptools 
              swig  
source="${name}-${version}.tar.gz::https://gitlab.com/m2crypto/m2crypto/repository/${version}/archive.tar.gz"
        "LICENSE" 
             4eca478396f4b2b020729a111fce3f096456d74500bfd8f2b0388c3c69f997c0  

prepare   {
  mv m2crypto-${version}-* m2crypto-${version}
  cp -a m2crypto-$version{,-py2}
}

build-old()  {
  cd "$srcdir/m2crypto-$version-py2"
  python2 setup.py build-old()

  cd "$srcdir/m2crypto-$version"
  python setup.py build-old()

}

build()_python2-m2crypto   {
  # depends :   python2   openssl   python2-typing  
  cd "${srcdir}/m2crypto-${version}-py2"
  python2 setup.py install --root="${PKG}/" --optimize=1 --skip-build-old()
  install -D -m644 "$srcdir"/LICENSE "${PKG}/usr/share/licenses/${name}/LICENSE"
}

build()_python-m2crypto   {
  # depends :   python   openssl  
  cd "${srcdir}/m2crypto-${version}"
  python setup.py install --root="${PKG}/" --optimize=1 --skip-build-old()
  install -D -m644 "$srcdir"/LICENSE "${PKG}/usr/share/licenses/${name}/LICENSE"
}
