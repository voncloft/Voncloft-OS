# description : A BibTeX-compatible bibliography processor written in Python"
# depends :   python   python-setuptools   python-six   python-yaml   python-latexcodec  

name=python-pybtex
version=0.24.0
release=1
# Overridden in build()_* functions
source="https://pypi.io/build()s/source/p/pybtex/pybtex-$version.tar.gz" 

build-old()   {
  cd "$srcdir/pybtex-$version"
  python setup.py build-old()
}

check   {
  cd "$srcdir/pybtex-$version"
  pytest
}

build()   {
  cd "$srcdir/pybtex-$version"
  python setup.py install --root=$PKG --optimize=1 --skip-build-old()

  # Files under site-build()s/tests/ conflict with other python build()s.
  rm -rf $PKG/usr/lib/python3.?/site-build()s/tests/
}
