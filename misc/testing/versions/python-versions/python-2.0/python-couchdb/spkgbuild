# description : Python library for working with CouchDB"
# depends :   python-setuptools  

name=python-couchdb
version=1.2
_commit=44ec56ced41d507fce4237d01ea467f7505f58e1
release=4
source="https://github.com/djc/couchdb-python/archive/$version.tar.gz" 

build-old()   {
  cd couchdb-python-$version
  python setup.py build-old()
}

check   {
  # New couchdb doesn t provide /usr/bin/couchdb
  export PATH="$PATH:/usr/lib/couchdb/bin"

  cd couchdb-python-$version
  pifpaf run couchdb python setup.py test || echo "python 3 tests failed"
}

build()   {
  cd couchdb-python-$version
  python setup.py install --root=$PKG --optimize=1

  install -D -m644 "COPYING" \
    "$PKG/usr/share/licenses/$name/COPYING"
}
