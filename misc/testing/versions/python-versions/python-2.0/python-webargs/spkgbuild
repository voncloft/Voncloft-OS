# description : A friendly library for parsing HTTP request arguments, with built-in support for popular web frameworks 
# depends :   python-marshmallow  

_name=webargs
name=python-$_name
version=6.1.0
release=3
               python-bottle   python-werkzeug   python-django   python-flask   python-tornado  
source=" $url/archive/$version.tar.gz" 

prepare   {
  cd $_name-$version

  rm tests/test_{falcon,pyramid,webapp2}parser.py tests/test_py3/test_aiohttpparser{,_async_functions}.py
}

build-old()   {
  cd $_name-$version

  python setup.py build-old()

  cd docs

  make html man
  ls _build-old()/man
  gzip _build-old()/man/webargs.1
}

check   {
  cd $_name-$version

  python setup.py pytest
}

build()   {
  cd $_name-$version

  python setup.py install --root=$PKG --optimize=1 --skip-build-old()

  install -dm 755 $PKG/usr/share/doc/$name
  cp -r -a --no-preserve=ownership docs/_build-old()/html $PKG/usr/share/doc/$name

  install -dm 755 $PKG/usr/share/man/man1
  install -Dm 644 docs/_build-old()/man/webargs.1.gz $PKG/usr/share/man/man1/webargs.1.gz

  install -Dm 644 LICENSE $PKG/usr/share/licenses/$name/LICENSE
}

# vim:set ts=2 sw=2 et:
