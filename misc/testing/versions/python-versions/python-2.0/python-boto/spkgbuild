# description : A Python interface to Amazon Web Services  AWS  
# depends :   python  

name=python-boto
version=2.49.0.20190327
_commit=9e1cd3bd76e738d80630f1bd9160fd87c8eab865
release=5
source="$name-$_commit.tar.gz::https://github.com/boto/boto/archive/$_commit.tar.gz"
         boto-python-3.8.patch 
             3e32db201adb637d3b6041f9e7be65889f1306042cbed36e4884207cbf772dc8f7691be9a505ec79f111b99c8313e0d42436c1f9a2dfa095de6cc77a7fe4bc6d  

prepare   {
  mv boto-{$_commit,$version}
   cd boto-$version
   patch -p1 -i ../boto-python-3.8.patch # Fix escaping with python 3.8
   
}

check   {
  cd "$srcdir"/boto-$version
  python tests/test.py default
}

build()   {
  cd boto-$version

  python setup.py install -O1 --root=$PKG
  install -D -m644 LICENSE $PKG/usr/share/licenses/$name/LICENSE
  
  # Remove  somewhat deprecated  python 2 tools.
  rm -r $PKG/usr/bin
}
