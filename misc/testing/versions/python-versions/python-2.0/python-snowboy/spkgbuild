# description : DNN based hotword and wake word detection toolkit"
# depends :   python-pyaudio   cblas  

name=python-snowboy
version=1.3.0
release=3
source="https://github.com/Kitt-AI/snowboy/archive/v$version.tar.gz" 

prepare   {
  # TODOhttps://github.com/Kitt-AI/snowboy/issues/377
  # TODOhttps://github.com/Kitt-AI/snowboy/pull/376
  sed -i -e "s|-lf77blas -lcblas -llapack -latlas|-lcblas|g" \
         -e  s/ -shared/ -Wl,-O1,--as-needed\0/g  \
         snowboy-$version/swig/Python3/Makefile
}

build-old()   {
  cd snowboy-$version
  python setup.py build-old()
}

build()   {
  cd snowboy-$version
  python setup.py install --root=$PKG --optimize=1
  install -Dm644 LICENSE $PKG/usr/share/licenses/$name/LICENSE
}
