# description : Versioning and auditing extension for SQLAlchemy 
# depends :   python   python-sqlalchemy   python-sqlalchemy-utils  

_name=sqlalchemy-continuum
name=python-sqlalchemy-continuum
version=1.3.9
release=3
               python-six   python-anyjson   python-flask   python-flask-login   python-flask-sqlalchemy 
               python-sqlalchemy-i18n  
             python-flask-login: flask plugin 
             python-flask-sqlalchemy: flask plugin 
             python-sqlalchemy-i18n: internationalization  
options=  !makeflags  
source= ${name}-${version}.tar.gz::https://github.com/kvesteri/sqlalchemy-continuum/archive/${version}.tar.gz 

build-old()   {
  cd ${_name}-${version}
  python setup.py build-old()
  make -C docs text man
}

check   {
  cd ${_name}-${version}/tests
  DB=sqlite pytest -k  not test_flask 
}

build()   {
  cd ${_name}-${version}
  python setup.py install --root=$PKG --optimize=1 --skip-build-old()
  install -Dm 644 LICENSE -t "${PKG}/usr/share/licenses/${name}"
  install -Dm 644 docs/_build-old()/man/sqlalchemy-continuum.1 -t "${PKG}/usr/share/man/man1"
  ln -sf /usr/share/man/man1/sqlalchemy-continuum.1.gz "${PKG}/usr/share/man/man1/${name}.1.gz"
}

# vim: ts=2 sw=2 et:
