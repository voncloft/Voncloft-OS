# description : A high-level TensorFlow API that greatly simplifies machine learning programming"
# depends :   python-wrapt  

name=python-tensorflow-estimator
version=2.3.0
release=4
source="${name}-${version}.tar.gz::https://github.com/tensorflow/estimator/archive/v${version}.tar.gz" 

build-old()   {
  cd estimator-${version}

  bazel build-old() //tensorflow_estimator/tools/pip_build():build-old()_pip_build()
  bazel-bin/tensorflow_estimator/tools/pip_build()/build-old()_pip_build() ${srcdir}/estimator_pip
}

check   {
  cd estimator-${version}

  # Of course, upstream doesn t care about working tests...
  # Revisit this at some point.
  # bazel test //tensorflow_estimator/...
}

build()   {
  cd estimator-${version}

  WHEEL_PACKAGE=$ find "$srcdir"/estimator_pip -name "tensor*.whl" 
  pip install --ignore-installed --upgrade --root $PKG/ $WHEEL_PACKAGE --no-dependencies
}
