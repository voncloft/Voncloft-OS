# description : Python binding for xxHash 
# depends :   python   xxhash  

_pyname=xxhash
name=python-${_pyname}
version=2.0.0
release=3
source="${name}-${version}.tar.gz::https://github.com/ifduyue/${name}/archive/v${version}.tar.gz" 

prepare   {
    cd "${srcdir}/${name}-${version}"

    # link to xxHash
    export XXHASH_LINK_SO=1
}

build-old()   {
    cd "${srcdir}/${name}-${version}"
    python setup.py build-old()
}

check   {
    cd "${srcdir}/${name}-${version}"
    python setup.py test
}

build()   {
    cd "${srcdir}/${name}-${version}"
    python setup.py install --root=$PKG --optimize=1
    install -D -m644 LICENSE "${PKG}/usr/share/licenses/${name}/LICENSE"
}
