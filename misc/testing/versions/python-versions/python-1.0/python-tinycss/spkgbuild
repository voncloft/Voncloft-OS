
name=python-tinycss
version=0.4
release=5
# description : A complete yet simple CSS parser for Python"
# depends :   python  
source="https://pypi.io/packages/source/t/tinycss/tinycss-$version.tar.gz" 

prepare   {
    cd "${srcdir}"/tinycss-${version}

    rm tinycss/speedups.c
    # isort is not a sign of failing code
    sed -i  /addopts/d  setup.cfg
}

build   {
    cd "${srcdir}"/tinycss-${version}

    python setup.py build
}

check   {
    cd "${srcdir}"/tinycss-${version}

    pytest build/
    find build/ -type f -name \*-PYTEST.pyc -delete
}

package   {
    cd "${srcdir}"/tinycss-${version}

    python setup.py install --root=$PKG --optimize=1
    install -D -m644 LICENSE $PKG/usr/share/licenses/${name}/LICENSE
}
