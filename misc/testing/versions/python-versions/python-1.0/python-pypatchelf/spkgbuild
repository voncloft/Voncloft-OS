
_name=pypatchelf
name=python-$_name
_commit=c8b0b622ead44f15c68fe92e5c4606797d0dcdff
version=0.9
release=2
# description : Patchelf utility, packaged for python/pip 
# depends :   python   patchelf  
source=" $url/archive/$_commit.tar.gz" 

prepare   {
  cd $_name-$_commit

  sed -i "s| build_ext : build_ext||
          s| patchelf = pypatchelf:main ,||
          /ext_modules/d" setup.py
  sed -i  s|PATCHELF =.*|PATCHELF = "/usr/bin/patchelf"|  pypatchelf/__init__.py
}

build   {
  cd $_name-$_commit

  python setup.py build
}

package   {
  cd $_name-$_commit

  python setup.py install --root=$PKG --optimize=1 --skip-build

  install -Dm 644 LICENSE $PKG/usr/share/licenses/$name/LICENSE
}

# vim:set ts=2 sw=2 et:
