
name=python-openstacksdk
version=0.53.0
release=1
# description : An SDK for building applications to work with OpenStack"
# depends :   python-six   python-pbr   python-yaml   python-jsonpatch   python-appdirs 
          python-keystoneauth1   python-os-service-types   python-deprecation 
          python-requestsexceptions   python-decorator   python-jmespath   python-iso8601 
          python-netifaces   python-dogpile.cache   python-munch   python-cryptography  
               python-jsonschema   python-oslo-config   python-prometheus_client   python-hacking  
source="https://github.com/openstack/openstacksdk/archive/$version.tar.gz" 

export PBR_VERSION=$version

prepare   {
  echo -e "\nglobal-include *.json" >> openstacksdk-$version/MANIFEST.in
  sed -i  s/assertItemsEqual/assertCountEqual/  openstacksdk-$version/openstack/tests/unit/*.py openstacksdk-$version/openstack/tests/unit/*/*.py
}

build   {
  cd openstacksdk-$version
  python setup.py build
}

check   {
  # Fromhttps://github.com/openstack/openstacksdk/blob/master/tox.ini
  export OS_LOG_CAPTURE=true OS_STDOUT_CAPTURE=true OS_STDERR_CAPTURE=true

  cd openstacksdk-$version
  # TODO
  stestr run || :
}

package   {
  cd openstacksdk-$version
  python setup.py install --root=$PKG --optimize=1
}

# vim:set ts=2 sw=2 et:
