
name=python-jose
version=3.2.0
release=4
# description : A JOSE implementation in Python"
# depends :   python-rsa   python-six   python-ecdsa   python-future  
             python-pycryptodome: one option for better performance  
source="https://github.com/mpdavis/python-jose/archive/$version/$name-$version.tar.gz" 

prepare   {
  cd python-jose-$version
  sed -i  s/<0.15//  setup.py
}

build   {
  cd python-jose-$version
  python setup.py build
}

check   {
  cd python-jose-$version
  #https://github.com/mpdavis/python-jose/issues/176
  python setup.py pytest --addopts "--deselect tests/algorithms/test_EC.py::TestECAlgorithm::test_key_too_short"
}

package   {
  cd python-jose-$version
  python setup.py install --root=$PKG --optimize=1
  install -Dm644 LICENSE $PKG/usr/share/licenses/$name/LICENSE
}
