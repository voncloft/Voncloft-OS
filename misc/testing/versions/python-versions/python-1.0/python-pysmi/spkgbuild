
name=python-pysmi
_pyname="${name/*-/}"
version=0.3.4
release=6
# description : SNMP/SMI MIB parsing and conversion library designed to turn ASN.1 MIBs into various formats 
# depends :   python   python-ply  
source= ${_pyname}-${version}.tar.gz::https://github.com/etingof/pysmi/archive/v${version}.tar.gz 

build   {
  cd ${_pyname}-${version}
  python setup.py build
  make -C docs text man
}

check   {
  cd ${_pyname}-${version}
  py.test
}

package   {
  cd ${_pyname}-${version}
  python setup.py install --prefix=/usr --root=$PKG --optimize=1 --skip-build

  cp -r docs/build/text "${PKG}/usr/share/doc/${name}"
  cp -r examples -t "${PKG}/usr/share/doc/${name}"

  install -Dm 644 docs/build/man/${_pyname}.1 "${PKG}/usr/share/man/man1/${_pyname}.1"
  install -Dm 644 docs/build/man/${_pyname}.1 "${PKG}/usr/share/man/man1/${name}.1"
  install -Dm 644 LICENSE.rst -t "${PKG}/usr/share/licenses/${name}"

  mv "${PKG}/usr/bin/mibdump"{.py,}
  mv "${PKG}/usr/bin/mibcopy"{.py,}
}

# vim: ts=2 sw=2 et:
