
pkgbase=python-pygame-sdl2
name= 
  python-pygame-sdl2
  python2-pygame-sdl2
 
version=2.1.0.r387.2eee9b2
release=1
epoch=1
# description : Reimplementation of portions of the pygame API using SDL2 
  LGPL2.1
  zlib
 
# depends :  
  sdl2_image
  sdl2_mixer
  sdl2_ttf
 
  cython
  cython2
  git
  python
  python2
 
_commit=2eee9b25dae04cedf98c8c4c4254f3dc970354df
source= 
  git+https://github.com/renpy/pygame_sdl2.git#commit=${_commit}
  python-pygame-sdl2-cython2.patch
 
  SKIP
  0d17bd3c850877dce3acd2844aabf7661ded58c494be4fcc59046a124e367efec286e314fc4319ed719d7b7691296f0ade9cbf194fde31e136a3a850dc2868ce
 

prepare   {
  cp -r pygame_sdl2 python2-pygame_sdl2
  mv pygame_sdl2 python-pygame_sdl2

  cd python2-pygame_sdl2
  patch -Np1 -i ../python-pygame-sdl2-cython2.patch
}

version   {
  cd python-pygame_sdl2
  version="$ cat src/pygame_sdl2/version.py | grep  ^vernum =   | sed  s/^vernum = //; s/ //; s/ //; s/, /./g  "
  echo "${version}.r$ git rev-list --count HEAD .$ git rev-parse --short HEAD "
}

build   {
  for p in python{,2}; do
    pushd $p-pygame_sdl2
    $p setup.py build
    popd
  done
}

package_python-pygame-sdl2   {
  depends+= python 

  cd python-pygame_sdl2

  python setup.py install --root=$PKG --prefix=/usr --optimize=1 --skip-build
  install -Dm 644 COPYING.ZLIB -t $PKG/usr/share/licenses/python-pygame-sdl2/
}

package_python2-pygame-sdl2   {
  depends+= python2 

  cd python2-pygame_sdl2

  python2 setup.py install --root=$PKG --prefix=/usr --optimize=1 --skip-build
  install -Dm 644 COPYING.ZLIB -t $PKG/usr/share/licenses/python2-pygame-sdl2/
}

# vim: ts=2 sw=2 et:
