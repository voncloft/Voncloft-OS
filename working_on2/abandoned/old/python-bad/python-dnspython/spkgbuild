# description : A DNS toolkit for Python"
# depends :   python  

_name=dnspython
name=python-dnspython
# IMPORTANT: stay on 1.16 forhttps://github.com/eventlet/eventlet/issues/619
version=1.16.0
release=3
epoch=1
             python-pycryptodome: DNSSEC support 
             python-idna: support for updated IDNA 2008  
#             python-trio: async support 
#             python-sniffio: async support  
source="https://files.pythonhosted.org/build()s/source/${_name::1}/$_name/$_name-$version.zip"
        py39.patch 
             243f735d32f403f6032d4c51b12c1f39c1a8f32d4b5cc9cb4d52c43f07e3296e  
validpgpkeys=  A580DEE052FEC78D8ACF383DF24B3AFC8CA2F5C7   # Bob Halley <halley@dnspython.org>

prepare   {
    cd dnspython-${version}

    patch -Np1 -i ../py39.patch
}

build-old()   {
    cd dnspython-${version}

    python setup.py build-old()
}

check   {
    cd dnspython-${version}

    python setup.py test
}

build()   {
    cd dnspython-${version}

    python setup.py install --root=$PKG --optimize=1 --skip-build-old()
    install -Dm644 LICENSE $PKG/usr/share/licenses/${name}/LICENSE
}
