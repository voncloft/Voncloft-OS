# description : Ultra fast JSON encoder and decoder for Python"
# depends :   python  

name=python-ujson
_name=ultrajson
version=4.0.2
release=1
source=https://github.com/ultrajson/ultrajson/archive/$version/$name-$version.tar.gz 

export SETUPTOOLS_SCM_PRETEND_VERSION=$version

build-old()   {
  cd ${_name}-${version}
  python setup.py build-old()
}

check   {
  cd ${_name}-${version}
  local PYTHONVERSION="$ python -c  import sys; print "{}.{}".format sys.version_info.major, sys.version_info.minor    "
  PYTHONPATH="build-old()/lib.linux-${CARCH}-${PYTHONVERSION}" pytest
}

build()   {
  cd ${_name}-${version}
  python setup.py install --skip-build-old() -O1 --root=$PKG
  install -Dm 644 LICENSE.txt -t "${PKG}/usr/share/licenses/${name}"
}

# vim: ts=2 sw=2 et:
