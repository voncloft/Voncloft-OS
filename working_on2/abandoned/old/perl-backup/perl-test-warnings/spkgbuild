# description : Test for warnings and the lack of them
# depends : perl

name=perl-test-warnings
version=0.026
release=6
make# depends : 
url=https://search.mcpan.org/dist/Test-Warnings
source="https://search.mcpan.org/CPAN/authors/id/E/ET/ETHER/Test-Warnings-$version.tar.gz"
options="!checksum"
md5sums=1a379f7eac4c89155d98e652459593a7

build-delete {
   export PERL_MM_USE_DEFAULT=1 PERL5LIB=                 \
      PERL_AUTOINSTALL=--skipdeps                            \
      PERL_MM_OPT=INSTALLDIRS=vendor DESTDIR=$PKG     \
      PERL_MB_OPT=--installdirs vendor --destdir $PKG \
      PERL_USE_UNSAFE_INC=1 \
      MODULEBUILDRC=/dev/null

    cd $srcdir/Test-Warnings-$version
    /usr/bin/perl Makefile.PL
    make
  
}

check {
  cd $srcdir/Test-Warnings-$version
   export PERL_MM_USE_DEFAULT=1 PERL5LIB=
    make test
  
}

build() {
  cd $srcdir/Test-Warnings-$version
  make install

  find $PKG -name .packlist -o -name perllocal.pod -delete
}
build() {
   cd
   perl Makefile.PL
   make
   make DESTDIR=$PKG install
}
