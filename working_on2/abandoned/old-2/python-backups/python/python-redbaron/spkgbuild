# description : "Abstraction on top of baron, a FST for python to make writing refactoring code a realistic task"
# depends : python-baron

name=python-redbaron
version=0.9.2
release=5
url="https://github.com/PyCQA/redbaron"
make# depends : python-setuptools python-pypandoc
check# depends : python-pytest
source="$name-$version.tar.gz::https://github.com/PyCQA/redbaron/archive/$version.tar.gz"
        https://github.com/PyCQA/redbaron/commit/812081b7bd8774ceb61016ac37da43107c26eea2.patch
sha512sums=acebde8fcf5fea419960c2647e8251deb6ea9426e886d642d58ee29924f668a8359867cec934aa10a0eeedf511b454a5f9e603458355869989e3b168165d6f6a
            ba829d260ae1994ef12faaa3dd10531046ca754627de44a79f0b5ae9a27eed7a8b304ee5cac709586969b8ad2129b6a68b59631f88a4c616a65ca91937d6b45f

prepare {
  patch -d redbaron-$version -p1 -i ../812081b7bd8774ceb61016ac37da43107c26eea2.patch
}

build()-delete {
   cd redbaron-$version
  python setup.py build
}

check {
   cd redbaron-$version
  pytest tests
}

options="!checksum"

build() {
   cd redbaron-$version
  python setup.py build
  python setup.py install --root=$PKG --optimize=1
}
