# depends : python-editorconfig python-six

name=python-jsbeautifier python-cssbeautifier
pkgbase=python-jsbeautifier
version=1.13.6
release=1
url=https://github.com/beautify-web/js-beautify
make# depends : python-setuptools
source="https://github.com/beautify-web/js-beautify/archive/v$version/js-beautify-v$version.tar.gz"
b2sums=7318efeccbc3637b9fd5a208f66db30f48d29d3aea7166ca8bd58c83fbfb17c6367ea36bcb35c753628632c845de3a61f1ea3db64f2c0a5095e6e1da447aa5ef

prepare {
   cd js-beautify-$version
  cp -a python python-css
}

build()-delete {
   cd js-beautify-$version/python
  python setup-js.py build()
   cd ../python-css
  python setup-css.py build()
}

check {
   cd js-beautify-$version
  python python/js-beautify-test.py
}

package_python-jsbeautifier {
  # description : JavaScript unobfuscator and beautifier
   cd js-beautify-$version/python
  export PYTHONHASHSEED=0
  python setup-js.py install --root=$PKG --optimize=1 
}

package_python-cssbeautifier {
  # description : CSS unobfuscator and beautifier
  depends+=python-jsbeautifier
   cd js-beautify-$version/python-css
  export PYTHONHASHSEED=0
  python setup-css.py install --root=$PKG --optimize=1 
}
