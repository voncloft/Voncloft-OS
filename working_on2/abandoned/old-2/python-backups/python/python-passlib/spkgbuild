# description : "A password hashing library for Python"
# depends : "python"

name=python-passlib
version=1.7.4
release=3
url="https://code.google.com/p/passlib/"
opt# depends : "python-fastpbkdf2: accelerate PBKDF2-based hashes"
            "python-bcrypt: accelerate Bcrypt hashes"
            "python-scrypt: accelerate SCrypt hashes"
make# depends : python-setuptools
check# depends : python-nose python-bcrypt python-django python-fastpbkdf2 python-scrypt
source="https://pypi.io/packages/source/p/passlib/passlib-$version.tar.gz"
sha512sums=350bd6da5ac57e6c266ffe8bf9684c8c2cce3fc6b513eb6c7bc1b302d2d8a1b701e9c01c953782520a2ac37b7ec1f6d7bd5855f99f6ee0e2dbbf33f2d49a9530

check {
  export PASSLIB_TEST_MODE=full

   cd "$srcdir"/passlib-$version
  python setup.py nosetests || echo "https://bitbucket.org/ecollins/passlib/issues/98/passlibextdjango-with-django-1112-fails"
}

options="!checksum"

build() {
   cd passlib-$version
  python setup.py build
  python setup.py install -O1 --root=$PKG
}

