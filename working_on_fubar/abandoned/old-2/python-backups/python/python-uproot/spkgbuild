# description : "Minimalist CERN ROOT I/O in pure Python and Numpy"
# depends : python-awkward python-cachetools python-lz4 python-numpy python-uproot-methods python-zstandard

pkgbase=python-uproot
name=python-uproot python-uproot-docs
_name=uproot
version=3.12.0
release=2
make# depends : python-setuptools
check# depends : python-mock python-pkgconfig python-pandas python-pytest-runner python-requests python-xxhash
opt# depends : xrootd: access remote files over XRootD
            python-pandas: fill Pandas DataFrames instead of Numpy arrays
            python-requests: access remote files through HTTP
            python-xxhash: handle lz4-compressed ROOT files
url="https://github.com/scikit-hep/${_name}"

source="${_name}-${version}::${url}/archive/${version}.tar.gz"
sha256sums=70e0885c1d30fa49525ab4140ece52aa27f74e86fbb2f189052ff17b802b45b9

build()-delete {
     cd "${srcdir}/${_name}-${version}"
    python setup.py build
}

check {
     cd "${srcdir}/${_name}-${version}"
    python setup.py pytest
}

package_python-uproot {
    optdepends+=python-uproot-docs: docs
     cd "${srcdir}/${_name}-${version}"

    python setup.py build
  python setup.py install --root="${PKG}/" --optimize=1

}

package_python-uproot-docs {
    # depends : python-sphinx
     cd "${srcdir}/${_name}-${version}"


    install -d "${PKG}/usr/share/doc/${pkgbase}"
    cp -r docs/* "${PKG}/usr/share/doc/${pkgbase}/"
}
