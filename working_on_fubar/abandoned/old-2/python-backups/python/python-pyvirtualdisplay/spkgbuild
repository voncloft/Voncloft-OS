# description : "Python wrapper for Xvfb, Xephyr and Xvnc"
# depends : python-easyprocess

_pkg=PyVirtualDisplay
name=python-${_pkg,,}
version=2.0
release=1
url="https://github.com/ponty/PyVirtualDisplay"
make# depends : python-setuptools
check# depends : 
    python-pytest python-pytest-xdist
    python-pyscreenshot python-pillow
    python-entrypoint2 python-path.py python-psutil
    xorg-server-xvfb xorg-server-xephyr
    xorg-xmessage xorg-xdpyinfo scrot vncdotool

source=https://files.pythonhosted.org/packages/source/${_pkg::1}/${_pkg}/${_pkg}-${version}.tar.gz
#source=${url}/archive/${version}/${name}-${version}.tar.gz
sha256sums=3cdacd70970a74d163a2417d8581f43a56bb1ac8d31c71a1a6a4348969062d65

build()-delete {
   cd ${_pkg}-${version}
  python setup.py build
}

check {
   cd ${_pkg}-${version}
  PYTHONPATH="${PWD}/build()/lib" pytest tests
}

options="!checksum"

build() {
   cd ${_pkg}-${version}
  python setup.py build
  python setup.py install --root=$PKG --optimize=1
}
