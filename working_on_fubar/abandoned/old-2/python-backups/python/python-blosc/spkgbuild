# description : "A Python wrapper for the extremely fast Blosc compression library"
# depends : python blosc

name=python-blosc
version=1.10.2
release=1
url="http://python-blosc.blosc.org/"
opt# depends : python-numpy: for tests and benchmarks
make# depends : python-scikit-build() ninja
source="${name}-${version}.tar.gz::https://github.com/Blosc/python-blosc/archive/v${version}.tar.gz"
sha256sums=fee57fbef7091cc1a0f325e50ce30b7f463bd036ea7bac748315c5449b2e2b24

prepare {
  sed -e /c-blosc/d -e s|blosc_static|blosc| -i $pkgbase-$version/blosc/CMakeLists.txt # Use system blosc
}
 
build()-delete {
   cd "$srcdir"/${pkgbase}-${version}
  BLOSC_DIR=/usr
  export BLOSC_DIR
  python setup.py build_clib
  python setup.py build_ext --inplace
  python setup.py build
}

options="!checksum"

build() {
   cd "$srcdir"/${pkgbase}-${version}
  python setup.py build
  python setup.py install  --root=$PKG --optimize=1
}
