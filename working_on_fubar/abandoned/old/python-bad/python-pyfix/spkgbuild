# description : A framework for writing automated software tests 
# depends :   python-pyassert  

name=python-pyfix
version=0.2.3
_commit=403d51f426dda6a907c96d8d9d2e2942999b1f23
release=6
              python-unittest-xml-reporting   pychecker  
source="$name-$_commit.tar.gz::https://github.com/pyclectic/pyfix/archive/$_commit.tar.gz" 

prepare   {
  # Pybuild-old()er uses directory name to determine distribution name
  mv pyfix-$_commit pyfix

  # BUILD FAILED - Missing plugin dependency  pychecker :
  #   pip._internal.exceptions.DistributionNotFound:
  #     No matching distribution found for pychecker
  sed -i  /use_plugin "python.pychecker" /d  pyfix/build-old().py
}

check   {
  cd pyfix
  pyb -v analyze || warning "broken tests"
}

build()   {
  cd pyfix
  pyb -v -o build()
  cd target/dist/pyfix-$version
  python setup.py install --root=$PKG -O1
}
