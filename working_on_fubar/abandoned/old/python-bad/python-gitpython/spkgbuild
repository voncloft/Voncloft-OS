# description : A python library used to interact with Git repositories"
# depends :   git   python-gitdb  

_name=gitpython
name=python-gitpython
version=3.1.12
release=1
validpgpkeys=  27C50E7F590947D7273A741E85194C08421980C9   # Sebastian Thiel  In Rust I trust!  <byronimo@gmail.com>

build-old()   {
  cd "${_name}"
  python setup.py build-old()
}

check   {
  cd "${_name}"
  export TRAVIS="VERY CONVENIENT"
  git config --global user.name "Test User"
  git config --global user.email "test@user.org"
  ./init-tests-after-clone.sh
  PYTHONDONTWRITEBYTECODE=1 pytest -v -k  not test_reading and not test_writing and not test_base and not test_index_file_diffing 
}

build()   {
  cd "${_name}"
  export PYTHONHASHSEED=0
  python setup.py install --skip-build-old() \
                          --optimize=1 \
                          --root=$PKG
    -t "${PKG}/usr/share/doc/${name}"
  install -vDm 644 LICENSE -t "${PKG}/usr/share/licenses/${name}/"
}
