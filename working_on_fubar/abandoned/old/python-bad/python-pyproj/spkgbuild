# description : Python interfaces to PROJ.4 library"
# depends :   proj   python  

name=python-pyproj
version=2.5.0
release=3
source= https://github.com/pyproj4/pyproj/archive/v${version}rel.tar.gz 

prepare   {
  cd "${srcdir}"

# Remove RPATH
  sed -i  /runtime_library_dirs=/d  pyproj-${version}rel/setup.py
}

build-old()   {
  cd "${srcdir}"

  export PROJ_DIR=/usr

  cd pyproj-${version}rel
  python setup.py build-old()
}

build()   {
  cd "${srcdir}"/pyproj-${version}rel
  python setup.py install --prefix=/usr --root=$PKG --optimize=1 --skip-build-old()

  install -Dm644 LICENSE_proj4 $PKG/usr/share/licenses/${name}/LICENSE
}
